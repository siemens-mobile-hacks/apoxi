<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>APOXI: HeapDataSink Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.6-NO -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li id="current"><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="classes.html"><span>Alphabetical&nbsp;List</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Data&nbsp;Fields</span></a></li>
  </ul></div>
<h1>HeapDataSink Class Reference</h1><!-- doxytag: class="HeapDataSink" --><!-- doxytag: inherits="DataSink" --><code>#include &lt;<a class="el" href="HeapDataSink_8hpp-source.html">Apoxi/Auxiliary/HeapDataSink.hpp</a>&gt;</code>
<p>
Inheritance diagram for HeapDataSink:<p><center><img src="classHeapDataSink__inherit__graph.png" border="0" usemap="#HeapDataSink__inherit__map" alt="Inheritance graph"></center>
<map name="HeapDataSink__inherit__map">
<area href="classDataSink.html" shape="rect" coords="23,7,97,34" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center>Collaboration diagram for HeapDataSink:<p><center><img src="classHeapDataSink__coll__graph.png" border="0" usemap="#HeapDataSink__coll__map" alt="Collaboration graph"></center>
<map name="HeapDataSink__coll__map">
<area href="classDataSink.html" shape="rect" coords="15,188,89,215" alt="">
<area href="classDrmAsset.html" shape="rect" coords="7,97,87,124" alt="">
<area href="classVector.html" shape="rect" coords="117,188,251,215" alt="">
<area href="classAllocator.html" shape="rect" coords="111,97,257,124" alt="">
<area href="classAllocator.html" shape="rect" coords="131,7,237,33" alt="">
<area href="classVector.html" shape="rect" coords="281,97,375,124" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual BOOLEAN&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHeapDataSink.html#53fb628824479277792b4f44619fab76">Close</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual BOOLEAN&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHeapDataSink.html#d07a298ab0fbae3ac171f643cb1a5028">GetSize</a> (UINT32 &amp;size) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHeapDataSink.html#17e6d69fdee6040077a6448c11e70628">HeapDataSink</a> (UINT32 block_size, <a class="el" href="group__Auxiliary.html#g1636ba41b4ff8890cdcad97ed10fb4af">DrmLocalId</a> id=<a class="el" href="group__Auxiliary.html#g20c0538a1314f420e00e79622c59a124">c_drm_invalid_local_id</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual BOOLEAN&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHeapDataSink.html#9da39476481c5803403c73ea4220d1fc">IsOpen</a> () const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual BOOLEAN&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHeapDataSink.html#ce20ed24443dcaab1caaa72f7f0d70fe">Open</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual UINT32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHeapDataSink.html#b58e442849bc6832831f1ae2282cb23d">Write</a> (UINT32 offset, const void HUGE *buf, UINT32 nbytes)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual UINT32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHeapDataSink.html#a8a76f1f6973f1316a2ba13837ba8f69">Write</a> (const void HUGE *buf, UINT32 nbytes)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHeapDataSink.html#65fe0b9f732e6f031443592b49cc3b7e">~HeapDataSink</a> ()</td></tr>

<tr><td colspan="2"><br><h2>Friends</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHeapDataSink.html#c40ab3c0b756495b7275607b2324a424">HeapDataSource</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Class <a class="el" href="classHeapDataSink.html">HeapDataSink</a> implements a data sink which writes to the heap memory. 
<p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="17e6d69fdee6040077a6448c11e70628"></a><!-- doxytag: member="HeapDataSink::HeapDataSink" ref="17e6d69fdee6040077a6448c11e70628" args="(UINT32 block_size, DrmLocalId id=c_drm_invalid_local_id)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">HeapDataSink::HeapDataSink           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">UINT32&nbsp;</td>
          <td class="mdname" nowrap> <em>block_size</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="group__Auxiliary.html#g1636ba41b4ff8890cdcad97ed10fb4af">DrmLocalId</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>id</em> = <code><a class="el" href="group__Auxiliary.html#g20c0538a1314f420e00e79622c59a124">c_drm_invalid_local_id</a></code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Creates a heap data sink instance. This data sink writes the given data to the heap memory. The heap data sink has to be opened using method <a class="el" href="classHeapDataSink.html#ce20ed24443dcaab1caaa72f7f0d70fe">Open()</a> before writing to it. On destruction, the heap data sink will be closed automatically if not explicitly done before.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>block_size</em>&nbsp;</td><td>Defines the size of the heap memory blocks the data sink allocates. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>id</em>&nbsp;</td><td>The DRM local ID. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="65fe0b9f732e6f031443592b49cc3b7e"></a><!-- doxytag: member="HeapDataSink::~HeapDataSink" ref="65fe0b9f732e6f031443592b49cc3b7e" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">HeapDataSink::~HeapDataSink           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Destroys the heap data sink and releases all memory occupied.     </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="53fb628824479277792b4f44619fab76"></a><!-- doxytag: member="HeapDataSink::Close" ref="53fb628824479277792b4f44619fab76" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">BOOLEAN HeapDataSink::Close           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Closes the heap data sink. After closing the data sink it cannot be opened again and data written any more.<p>
<dl compact><dt><b>Returns:</b></dt><dd>Success of operation. </dd></dl>

<p>
Implements <a class="el" href="classDataSink.html#5161255a007cdfc252056308a5c1d2ba">DataSink</a>.    </td>
  </tr>
</table>
<a class="anchor" name="d07a298ab0fbae3ac171f643cb1a5028"></a><!-- doxytag: member="HeapDataSink::GetSize" ref="d07a298ab0fbae3ac171f643cb1a5028" args="(UINT32 &amp;size) const " --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">BOOLEAN HeapDataSink::GetSize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">UINT32 &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>size</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns the size of the data sink in terms of bytes. The size of the data sink is actually defined by the amount of data written at the end of the data sink.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>The actual size will be written into this variable. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Success of operation. </dd></dl>

<p>
Implements <a class="el" href="classDataSink.html#02dd92c3ea4989707bfe6047a0d01170">DataSink</a>.    </td>
  </tr>
</table>
<a class="anchor" name="9da39476481c5803403c73ea4220d1fc"></a><!-- doxytag: member="HeapDataSink::IsOpen" ref="9da39476481c5803403c73ea4220d1fc" args="() const " --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">BOOLEAN HeapDataSink::IsOpen           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns whether the heap data sink is currently open or closed.<p>
<dl compact><dt><b>Returns:</b></dt><dd>Whether the heap data sink is open or not. </dd></dl>

<p>
Implements <a class="el" href="classDataSink.html#5755b49662a9d22eb54ac3541fe059eb">DataSink</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ce20ed24443dcaab1caaa72f7f0d70fe"></a><!-- doxytag: member="HeapDataSink::Open" ref="ce20ed24443dcaab1caaa72f7f0d70fe" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">BOOLEAN HeapDataSink::Open           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Opens the heap data sink for writing. The size of a freshly opened heap data sink is <code>0</code>. A heap data sink can only be written if it has been opened before.<p>
<dl compact><dt><b>Returns:</b></dt><dd>Success of operation. </dd></dl>

<p>
Implements <a class="el" href="classDataSink.html#b4210276cc73c473d1d850390bc2d185">DataSink</a>.    </td>
  </tr>
</table>
<a class="anchor" name="b58e442849bc6832831f1ae2282cb23d"></a><!-- doxytag: member="HeapDataSink::Write" ref="b58e442849bc6832831f1ae2282cb23d" args="(UINT32 offset, const void HUGE *buf, UINT32 nbytes)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">UINT32 HeapDataSink::Write           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">UINT32&nbsp;</td>
          <td class="mdname" nowrap> <em>offset</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const void HUGE *&nbsp;</td>
          <td class="mdname" nowrap> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>UINT32&nbsp;</td>
          <td class="mdname" nowrap> <em>nbytes</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Writes <em>nbytes</em> bytes of buffer <em>buf</em> to the data sink at the given <em>offset</em>. Note, that this method is only allowed to be used to overwrite existing data. Hence, if the given <em>offset</em> plus the number of bytes to write <em>nbytes</em> is larger than the current size of the data sink then an assertion fails. Overriding methods must implement this assertion. Since this method only overrides existing data it does not affect the size of the data sink.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>offset</em>&nbsp;</td><td>The offset where to start writing. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buf</em>&nbsp;</td><td>The buffer to be written. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>nbytes</em>&nbsp;</td><td>The number of bytes to be written. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Number of bytes actually written. </dd></dl>

<p>
Implements <a class="el" href="classDataSink.html#fab7d2fdbcd45c4c6d9be4705d7f362a">DataSink</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a8a76f1f6973f1316a2ba13837ba8f69"></a><!-- doxytag: member="HeapDataSink::Write" ref="a8a76f1f6973f1316a2ba13837ba8f69" args="(const void HUGE *buf, UINT32 nbytes)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">UINT32 HeapDataSink::Write           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const void HUGE *&nbsp;</td>
          <td class="mdname" nowrap> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>UINT32&nbsp;</td>
          <td class="mdname" nowrap> <em>nbytes</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Writes <em>nbytes</em> bytes of buffer <em>buf</em> to the data sink. The data is written at the end of the data sink and hence increases the size of the data sink by the amount of bytes written.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>buf</em>&nbsp;</td><td>The buffer to be written. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>nbytes</em>&nbsp;</td><td>The number of bytes to be written. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Number of bytes actually written. </dd></dl>

<p>
Implements <a class="el" href="classDataSink.html#a8bdd734da338e8e76a6d264c2b91930">DataSink</a>.    </td>
  </tr>
</table>
<hr><h2>Friends And Related Function Documentation</h2>
<a class="anchor" name="c40ab3c0b756495b7275607b2324a424"></a><!-- doxytag: member="HeapDataSink::HeapDataSource" ref="c40ab3c0b756495b7275607b2324a424" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">friend class <a class="el" href="classHeapDataSource.html">HeapDataSource</a><code> [friend]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li>Auxiliary/<a class="el" href="HeapDataSink_8hpp-source.html">HeapDataSink.hpp</a><li>Auxiliary/<a class="el" href="HeapDataSink_8cpp.html">HeapDataSink.cpp</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Wed Jan 25 01:18:36 2006 for APOXI by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6-NO </small></address>
</body>
</html>
