<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>APOXI: Obex/ObexOppDataSinkPushServer.hpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.6-NO -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<h1>Obex/ObexOppDataSinkPushServer.hpp</h1><a href="ObexOppDataSinkPushServer_8hpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*  ------------------------------------------------------------------------</span>
<a name="l00002"></a>00002 <span class="comment">    Copyright (C) COMNEON electronic technology GmbH &amp; Co. OHG.</span>
<a name="l00003"></a>00003 <span class="comment">    All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment">    ------------------------------------------------------------------------</span>
<a name="l00005"></a>00005 <span class="comment">    This document contains proprietary information belonging to COMNEON.</span>
<a name="l00006"></a>00006 <span class="comment">    Passing on and copying of this document, use and communication of its</span>
<a name="l00007"></a>00007 <span class="comment">    contents is not permitted without prior written authorisation.</span>
<a name="l00008"></a>00008 <span class="comment">    ------------------------------------------------------------------------ */</span>
<a name="l00009"></a>00009 
<a name="l00010"></a>00010 <span class="preprocessor">#if !defined(Apoxi_ObexOppDataSinkPushServer_hpp)</span>
<a name="l00011"></a><a class="code" href="ObexOppDataSinkPushServer_8hpp.html#b81ed9b1a2eb6c894130559d99894428">00011</a> <span class="preprocessor"></span><span class="preprocessor">#define Apoxi_ObexOppDataSinkPushServer_hpp</span>
<a name="l00014"></a>00014 <span class="preprocessor"></span>
<a name="l00015"></a>00015 <span class="preprocessor"></span><span class="preprocessor">#include &lt;<a class="code" href="Auxiliary_2MimeTypeTable_8hpp.html">Auxiliary/MimeTypeTable.hpp</a>&gt;</span>
<a name="l00016"></a>00016 
<a name="l00017"></a>00017 <span class="preprocessor">#include &lt;<a class="code" href="ObexOppServer_8hpp.html">Obex/ObexOppServer.hpp</a>&gt;</span>
<a name="l00018"></a>00018 
<a name="l00019"></a>00019 <span class="comment">// Forward declarations of classes</span>
<a name="l00020"></a>00020 <span class="keyword">class </span><a class="code" href="classExecutionContext.html">ExecutionContext</a>;
<a name="l00021"></a>00021 <span class="keyword">class </span><a class="code" href="classDataSink.html">DataSink</a>;
<a name="l00022"></a>00022 
<a name="l00058"></a><a class="code" href="classObexOppDataSinkPushServer.html">00058</a> <span class="keyword">class </span><a class="code" href="classObexOppDataSinkPushServer.html">ObexOppDataSinkPushServer</a> : <span class="keyword">private</span> <a class="code" href="classObexOppServer.html">ObexOppServer</a> {
<a name="l00059"></a>00059 
<a name="l00060"></a>00060     <span class="keyword">private</span>:
<a name="l00061"></a>00061         <span class="keyword">typedef</span> <a class="code" href="classObexOppServer.html">ObexOppServer</a>   <a class="code" href="classObexOppServer.html">Base</a>;
<a name="l00062"></a>00062 
<a name="l00063"></a>00063     <span class="keyword">public</span>:
<a name="l00068"></a>00068         <a class="code" href="classObexOppDataSinkPushServer.html#62cf5fecfc760a6dbb29009e37335de5">ObexOppDataSinkPushServer</a>();
<a name="l00069"></a>00069 
<a name="l00083"></a>00083         <a class="code" href="classObexOppDataSinkPushServer.html#62cf5fecfc760a6dbb29009e37335de5">ObexOppDataSinkPushServer</a>(<a class="code" href="group__Auxiliary.html#g731dfb8199ef3e1157ec61362b0211ea">MimeType</a>              mime_type,
<a name="l00084"></a>00084                                   <a class="code" href="classExecutionContext.html">ExecutionContext</a> *    ctx_ptr);
<a name="l00085"></a>00085 
<a name="l00087"></a>00087         <span class="keyword">virtual</span> <a class="code" href="classObexOppDataSinkPushServer.html#60c647ad4510aef60d8df8cd5134f23d">~ObexOppDataSinkPushServer</a>();
<a name="l00088"></a>00088 
<a name="l00100"></a>00100             <span class="keyword">virtual</span> <span class="keywordtype">void</span>    <a class="code" href="classObexOppDataSinkPushServer.html#931bd4858b9f75b37c0f1e15ac9a662b">Init</a>(<a class="code" href="classExecutionContext.html">ExecutionContext</a> *     ctx_ptr,
<a name="l00101"></a>00101                                  <a class="code" href="group__Auxiliary.html#g731dfb8199ef3e1157ec61362b0211ea">MimeType</a>               mime_type);
<a name="l00102"></a>00102 
<a name="l00120"></a>00120         <span class="keyword">inline</span>  <a class="code" href="classObexResult.html">ObexResult</a>  <a class="code" href="group__OBEX.html#gd9e9c6b7ed72c03e530291e001eed981">BindToMimeType</a>(<a class="code" href="group__Auxiliary.html#g731dfb8199ef3e1157ec61362b0211ea">MimeType</a>     mime_type);
<a name="l00121"></a>00121 
<a name="l00134"></a>00134         <span class="keyword">inline</span>  <a class="code" href="classObexResult.html">ObexResult</a>  <a class="code" href="group__OBEX.html#gd31a92fee21dd83331cce976648cf6ec">UnbindMimeType</a>(<a class="code" href="group__Auxiliary.html#g731dfb8199ef3e1157ec61362b0211ea">MimeType</a>     mime_type);
<a name="l00135"></a>00135 
<a name="l00140"></a>00140         <span class="keyword">inline</span>  <a class="code" href="classObexResult.html">ObexResult</a>  <a class="code" href="group__OBEX.html#gec5a68f58dc1974d52a438fff44c1e8c">Open</a>();
<a name="l00141"></a>00141 
<a name="l00148"></a>00148         <span class="keyword">inline</span>  <a class="code" href="classObexResult.html">ObexResult</a>  <a class="code" href="group__OBEX.html#g9111e19dc3fe2760963bb2bde67c29ad">Close</a>();
<a name="l00149"></a>00149 
<a name="l00161"></a>00161         <span class="keyword">inline</span>  <a class="code" href="classObexResult.html">ObexResult</a>  <a class="code" href="group__OBEX.html#ge1bbec0e4c268a962efd1dab8c2059a5">Accept</a>(<a class="code" href="classDataSink.html">DataSink</a> *   obj_sink_ptr,
<a name="l00162"></a>00162                                    <a class="code" href="NucInc_8hpp.html#69afa2e50b905f4eab1f2df8a3fd9f23">UINT32</a>       max_obj_size = 0xFFFFFFFFul);
<a name="l00163"></a>00163 
<a name="l00173"></a>00173         <span class="keyword">inline</span>  <a class="code" href="classObexResult.html">ObexResult</a>  <a class="code" href="group__OBEX.html#ga4aec90e1d93de564571fee9a2f3c3ee">Cancel</a>(<a class="code" href="classObexObject.html#106adb48f1cbc9d4b082f3b499c23ba5">ObexObject::ResponseCode</a>     resp_code,
<a name="l00174"></a>00174                                    <span class="keyword">const</span> <a class="code" href="classWString.html">WString</a> &amp;              resp_desc = L<span class="stringliteral">""</span>);
<a name="l00175"></a>00175 
<a name="l00180"></a>00180         <span class="keyword">inline</span>  <a class="code" href="classObexResult.html">ObexResult</a>  <a class="code" href="group__OBEX.html#g142e2ef42e8c1969ad841906571a2afd">Confirm</a>();
<a name="l00181"></a>00181 
<a name="l00189"></a>00189         <span class="keyword">inline</span>  <a class="code" href="NucInc_8hpp.html#69afa2e50b905f4eab1f2df8a3fd9f23">UINT32</a>      <a class="code" href="group__OBEX.html#g64997482d57fc8a41752096b415e2686">GetProgressInBytes</a>() <span class="keyword">const</span>;
<a name="l00190"></a>00190 
<a name="l00191"></a>00191 <span class="comment">//  protected:</span>
<a name="l00210"></a>00210 <span class="comment"></span>        <span class="keyword">virtual</span> <span class="keywordtype">void</span>    <a class="code" href="classObexOppDataSinkPushServer.html#6ccf3893b81f91c29ee52b29f943b749">OnPushIncoming</a>(<span class="keyword">const</span> <a class="code" href="classWString.html">WString</a> &amp;  obj_name,
<a name="l00211"></a>00211                                        <a class="code" href="group__Auxiliary.html#g731dfb8199ef3e1157ec61362b0211ea">MimeType</a>         obj_type,
<a name="l00212"></a>00212                                        <span class="keyword">const</span> <a class="code" href="classWString.html">WString</a> &amp;  obj_desc,
<a name="l00213"></a>00213                                        <a class="code" href="NucInc_8hpp.html#69afa2e50b905f4eab1f2df8a3fd9f23">UINT32</a>           obj_size) = 0;
<a name="l00214"></a>00214 
<a name="l00231"></a>00231         <span class="keyword">virtual</span> <span class="keywordtype">void</span>    <a class="code" href="classObexOppDataSinkPushServer.html#01f40575ebce4d75c7ce877e5d55afdc">OnDataComplete</a>();
<a name="l00232"></a>00232 
<a name="l00242"></a>00242         <span class="keyword">virtual</span> <span class="keywordtype">void</span>    <a class="code" href="classObexOppDataSinkPushServer.html#020d2ca3eadb1e819dfd12f954737d43">OnPushComplete</a>(<a class="code" href="classObexResult.html">ObexResult</a>       result,
<a name="l00243"></a>00243                                        <span class="keyword">const</span> <a class="code" href="classWString.html">WString</a> &amp;  description) = 0;
<a name="l00244"></a>00244 
<a name="l00245"></a>00245     <span class="keyword">private</span>:
<a name="l00246"></a>00246         <span class="keyword">class </span>OppImpl : <span class="keyword">public</span> <a class="code" href="classObexOppServer.html">ObexOppServer</a> {
<a name="l00247"></a>00247 
<a name="l00248"></a>00248             <span class="keyword">public</span>:
<a name="l00249"></a>00249                 OppImpl(<a class="code" href="classObexOppDataSinkPushServer.html">ObexOppDataSinkPushServer</a> &amp;     frontend);
<a name="l00250"></a>00250 
<a name="l00251"></a>00251                 <a class="code" href="classObexResult.html">ObexResult</a>      <a class="code" href="group__OBEX.html#ge1bbec0e4c268a962efd1dab8c2059a5">Accept</a>(<a class="code" href="classDataSink.html">DataSink</a> *   obj_sink_ptr,
<a name="l00252"></a>00252                                        <a class="code" href="NucInc_8hpp.html#69afa2e50b905f4eab1f2df8a3fd9f23">UINT32</a>       max_obj_size = 0xFFFFFFFFul);
<a name="l00253"></a>00253 
<a name="l00254"></a>00254                 <a class="code" href="classObexResult.html">ObexResult</a>      CloseOppServer();
<a name="l00255"></a>00255 
<a name="l00256"></a>00256 <span class="comment">//          protected:</span>
<a name="l00257"></a>00257                 <span class="keyword">virtual</span> <span class="keywordtype">void</span>    <a class="code" href="classObexOppServer.html#3abde52d5af5495e2b86852648a9ffbf">OnPush</a>(<span class="keyword">const</span> <a class="code" href="classWString.html">WString</a> &amp;  obj_name,
<a name="l00258"></a>00258                                        <span class="keyword">const</span> <a class="code" href="classString.html">String</a> &amp;   obj_type,
<a name="l00259"></a>00259                                        <span class="keyword">const</span> <a class="code" href="classWString.html">WString</a> &amp;  obj_desc,
<a name="l00260"></a>00260                                        <a class="code" href="NucInc_8hpp.html#69afa2e50b905f4eab1f2df8a3fd9f23">UINT32</a>           obj_size);
<a name="l00261"></a>00261 
<a name="l00262"></a>00262                 <span class="keyword">virtual</span> <span class="keywordtype">void</span>    <a class="code" href="classObexOppServer.html#e3bf70ad3d1a493af76792ff22e06b17">OnDataAvailable</a>(<a class="code" href="classObexBuffer.html">ObexBuffer</a> &amp;    app_data,
<a name="l00263"></a>00263                                                 <a class="code" href="NucInc_8hpp.html#50168fdbaa52d4a0b1c287d476050f12">BOOLEAN</a>         end_data);
<a name="l00264"></a>00264 
<a name="l00265"></a>00265                 <span class="keyword">virtual</span> <span class="keywordtype">void</span>    <a class="code" href="classObexOppDataSinkPushServer.html#020d2ca3eadb1e819dfd12f954737d43">OnPushComplete</a>(<a class="code" href="classObexResult.html">ObexResult</a>       result,
<a name="l00266"></a>00266                                                <span class="keyword">const</span> <a class="code" href="classWString.html">WString</a> &amp;  description);
<a name="l00267"></a>00267 
<a name="l00268"></a>00268             <span class="keyword">private</span>:
<a name="l00269"></a>00269                 <a class="code" href="classObexOppDataSinkPushServer.html">ObexOppDataSinkPushServer</a> &amp;     m_frontend;
<a name="l00270"></a>00270                 <a class="code" href="classDataSink.html">DataSink</a> *                      m_sink_ptr;
<a name="l00271"></a>00271                 <a class="code" href="NucInc_8hpp.html#69afa2e50b905f4eab1f2df8a3fd9f23">UINT32</a>                          m_sink_size;    <span class="comment">// Max. object size</span>
<a name="l00272"></a>00272                 <a class="code" href="NucInc_8hpp.html#50168fdbaa52d4a0b1c287d476050f12">BOOLEAN</a>                         m_is_accepted;
<a name="l00273"></a>00273 
<a name="l00274"></a>00274                 <span class="keywordtype">void</span>                            CleanUp();
<a name="l00275"></a>00275         };
<a name="l00276"></a>00276 
<a name="l00277"></a>00277         OppImpl                                 m_impl;
<a name="l00278"></a>00278 };
<a name="l00279"></a>00279 
<a name="l00280"></a>00280 <span class="comment">/*  ----------------------------------------------------------------------</span>
<a name="l00281"></a>00281 <span class="comment">    BindToMimeType</span>
<a name="l00282"></a>00282 <span class="comment">    ---------------------------------------------------------------------- */</span>
<a name="l00283"></a><a class="code" href="group__OBEX.html#gd9e9c6b7ed72c03e530291e001eed981">00283</a> <a class="code" href="classObexResult.html">ObexResult</a>  <a class="code" href="group__OBEX.html#gd9e9c6b7ed72c03e530291e001eed981">ObexOppDataSinkPushServer::BindToMimeType</a>(<a class="code" href="group__Auxiliary.html#g731dfb8199ef3e1157ec61362b0211ea">MimeType</a>  mime_type)
<a name="l00284"></a>00284 {
<a name="l00285"></a>00285     <span class="keywordflow">return</span>  m_impl.BindToMimeType(mime_type);
<a name="l00286"></a>00286 }<span class="comment">// BindToMimeType</span>
<a name="l00287"></a>00287 
<a name="l00288"></a>00288 <span class="comment">/*  ----------------------------------------------------------------------</span>
<a name="l00289"></a>00289 <span class="comment">    UnbindMimeType</span>
<a name="l00290"></a>00290 <span class="comment">    ---------------------------------------------------------------------- */</span>
<a name="l00291"></a><a class="code" href="group__OBEX.html#gd31a92fee21dd83331cce976648cf6ec">00291</a> <a class="code" href="classObexResult.html">ObexResult</a>  <a class="code" href="group__OBEX.html#gd31a92fee21dd83331cce976648cf6ec">ObexOppDataSinkPushServer::UnbindMimeType</a>(<a class="code" href="group__Auxiliary.html#g731dfb8199ef3e1157ec61362b0211ea">MimeType</a>  mime_type)
<a name="l00292"></a>00292 {
<a name="l00293"></a>00293     <span class="keywordflow">return</span>  m_impl.UnbindMimeType(mime_type);
<a name="l00294"></a>00294 }<span class="comment">// UnbindMimeType</span>
<a name="l00295"></a>00295 
<a name="l00296"></a>00296 <span class="comment">/*  ----------------------------------------------------------------------</span>
<a name="l00297"></a>00297 <span class="comment">    Open</span>
<a name="l00298"></a>00298 <span class="comment">    ---------------------------------------------------------------------- */</span>
<a name="l00299"></a><a class="code" href="group__OBEX.html#gec5a68f58dc1974d52a438fff44c1e8c">00299</a> <a class="code" href="classObexResult.html">ObexResult</a>  <a class="code" href="group__OBEX.html#gec5a68f58dc1974d52a438fff44c1e8c">ObexOppDataSinkPushServer::Open</a>()
<a name="l00300"></a>00300 {
<a name="l00301"></a>00301     <span class="keywordflow">return</span>  m_impl.Open();
<a name="l00302"></a>00302 }<span class="comment">// Open</span>
<a name="l00303"></a>00303 
<a name="l00304"></a>00304 <span class="comment">/*  ----------------------------------------------------------------------</span>
<a name="l00305"></a>00305 <span class="comment">    Close</span>
<a name="l00306"></a>00306 <span class="comment">    ---------------------------------------------------------------------- */</span>
<a name="l00307"></a><a class="code" href="group__OBEX.html#g9111e19dc3fe2760963bb2bde67c29ad">00307</a> <a class="code" href="classObexResult.html">ObexResult</a>  <a class="code" href="group__OBEX.html#g9111e19dc3fe2760963bb2bde67c29ad">ObexOppDataSinkPushServer::Close</a>()
<a name="l00308"></a>00308 {
<a name="l00309"></a>00309     <span class="keywordflow">return</span>  m_impl.CloseOppServer();
<a name="l00310"></a>00310 }<span class="comment">// Close</span>
<a name="l00311"></a>00311 
<a name="l00312"></a>00312 <span class="comment">/*  ----------------------------------------------------------------------</span>
<a name="l00313"></a>00313 <span class="comment">    Accept</span>
<a name="l00314"></a>00314 <span class="comment">    ---------------------------------------------------------------------- */</span>
<a name="l00315"></a><a class="code" href="group__OBEX.html#ge1bbec0e4c268a962efd1dab8c2059a5">00315</a> <a class="code" href="classObexResult.html">ObexResult</a>  <a class="code" href="group__OBEX.html#ge1bbec0e4c268a962efd1dab8c2059a5">ObexOppDataSinkPushServer::Accept</a>(<a class="code" href="classDataSink.html">DataSink</a> *    obj_sink_ptr,
<a name="l00316"></a>00316                                               <a class="code" href="NucInc_8hpp.html#69afa2e50b905f4eab1f2df8a3fd9f23">UINT32</a>        max_obj_size)
<a name="l00317"></a>00317 {
<a name="l00318"></a>00318     <span class="keywordflow">return</span>  m_impl.Accept(obj_sink_ptr, max_obj_size);
<a name="l00319"></a>00319 }<span class="comment">// Accept</span>
<a name="l00320"></a>00320 
<a name="l00321"></a>00321 <span class="comment">/*  ----------------------------------------------------------------------</span>
<a name="l00322"></a>00322 <span class="comment">    Cancel</span>
<a name="l00323"></a>00323 <span class="comment">    ---------------------------------------------------------------------- */</span>
<a name="l00324"></a><a class="code" href="group__OBEX.html#ga4aec90e1d93de564571fee9a2f3c3ee">00324</a> <a class="code" href="classObexResult.html">ObexResult</a>  <a class="code" href="group__OBEX.html#ga4aec90e1d93de564571fee9a2f3c3ee">ObexOppDataSinkPushServer::Cancel</a>(<a class="code" href="classObexObject.html#106adb48f1cbc9d4b082f3b499c23ba5">ObexObject::ResponseCode</a>  resp_code,
<a name="l00325"></a>00325                                               <span class="keyword">const</span> <a class="code" href="classWString.html">WString</a> &amp;           resp_desc)
<a name="l00326"></a>00326 {
<a name="l00327"></a>00327     <span class="keywordflow">return</span>  m_impl.CancelOperation(resp_code, resp_desc);
<a name="l00328"></a>00328 }<span class="comment">// Cancel</span>
<a name="l00329"></a>00329 
<a name="l00330"></a>00330 <span class="comment">/*  ----------------------------------------------------------------------</span>
<a name="l00331"></a>00331 <span class="comment">    Confirm</span>
<a name="l00332"></a>00332 <span class="comment">    ---------------------------------------------------------------------- */</span>
<a name="l00333"></a><a class="code" href="group__OBEX.html#g142e2ef42e8c1969ad841906571a2afd">00333</a> <a class="code" href="classObexResult.html">ObexResult</a>  <a class="code" href="group__OBEX.html#g142e2ef42e8c1969ad841906571a2afd">ObexOppDataSinkPushServer::Confirm</a>()
<a name="l00334"></a>00334 {
<a name="l00335"></a>00335     <span class="comment">// Buffer still owned by ObexOppServer instance !</span>
<a name="l00336"></a>00336     <span class="keywordflow">return</span>  m_impl.DataProcessed();
<a name="l00337"></a>00337 }<span class="comment">// Confirm</span>
<a name="l00338"></a>00338 
<a name="l00339"></a>00339 <span class="comment">/*  ----------------------------------------------------------------------</span>
<a name="l00340"></a>00340 <span class="comment">    GetProgressInBytes</span>
<a name="l00341"></a>00341 <span class="comment">    ---------------------------------------------------------------------- */</span>
<a name="l00342"></a><a class="code" href="group__OBEX.html#g64997482d57fc8a41752096b415e2686">00342</a> <a class="code" href="NucInc_8hpp.html#69afa2e50b905f4eab1f2df8a3fd9f23">UINT32</a>      <a class="code" href="group__OBEX.html#g64997482d57fc8a41752096b415e2686">ObexOppDataSinkPushServer::GetProgressInBytes</a>()<span class="keyword"></span>
<a name="l00343"></a>00343 <span class="keyword">const</span>
<a name="l00344"></a>00344 <span class="keyword"></span>{
<a name="l00345"></a>00345     <span class="keywordflow">return</span>  m_impl.GetProgressInBytes();
<a name="l00346"></a>00346 }<span class="comment">// GetProgressInBytes</span>
<a name="l00347"></a>00347 
<a name="l00349"></a>00349 <span class="preprocessor">#endif  // Apoxi_ObexOppDataSinkPushServer_hpp</span>
<a name="l00350"></a>00350 <span class="preprocessor"></span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue Jan 24 14:50:46 2006 for APOXI by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6-NO </small></address>
</body>
</html>
