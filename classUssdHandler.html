<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>APOXI: UssdHandler Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.6-NO -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li id="current"><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="classes.html"><span>Alphabetical&nbsp;List</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Data&nbsp;Fields</span></a></li>
  </ul></div>
<h1>UssdHandler Class Reference</h1><!-- doxytag: class="UssdHandler" --><code>#include &lt;<a class="el" href="UssdHandler_8hpp-source.html">Apoxi/Asc/UssdHandler.hpp</a>&gt;</code>
<p>
Inheritance diagram for UssdHandler:<p><center><img src="classUssdHandler__inherit__graph.png" border="0" usemap="#UssdHandler__inherit__map" alt="Inheritance graph"></center>
<map name="UssdHandler__inherit__map">
<area href="classMobileOriginatedUssdHandler.html" shape="rect" coords="7,82,207,108" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="classUssdHandler.html#3278928dc0927883fe0e4b26760c17f3c3c00614946417a3761f6638ebccbbef">ID</a> =  UssdHandlerId
 }</td></tr>

<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="group__ASC.html#gb24e48f62777c7b6d7291bb338583de3">SsApiRc</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUssdHandler.html#6c43ae4a9f539921f91125bfc3d03b31">Acknowledge</a> (<a class="el" href="SignalTypes_8hpp.html#29e54c8489e1aa33071c4307e1c111e7">Tipd</a> tipd)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="group__ASC.html#gb24e48f62777c7b6d7291bb338583de3">SsApiRc</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUssdHandler.html#86b4889de6f291034776dc0809e05ee7">Acknowledge</a> (const <a class="el" href="classUssdNotifyMsg.html">UssdNotifyMsg</a> &amp;msg)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="group__ASC.html#gc8795f29689f69bee6afcebf7037d96f">HandlerId</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUssdHandler.html#61bae96e4b99e81d7d45983236baf489">GetHandlerId</a> () const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="group__ASC.html#gb24e48f62777c7b6d7291bb338583de3">SsApiRc</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUssdHandler.html#7e66db4fcf68d5a5e2564e642cd86a27">Reply</a> (<a class="el" href="SignalTypes_8hpp.html#29e54c8489e1aa33071c4307e1c111e7">Tipd</a> tipd, const <a class="el" href="classWString.html">WString</a> &amp;ctrl_info, const <a class="el" href="classDataCodingScheme.html">DataCodingScheme</a> &amp;dcs)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="group__ASC.html#gb24e48f62777c7b6d7291bb338583de3">SsApiRc</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUssdHandler.html#713abfb8272a648deea9137bf6495e0c">Reply</a> (const <a class="el" href="classUssdRequestMsg.html">UssdRequestMsg</a> &amp;msg, const <a class="el" href="classWString.html">WString</a> &amp;ctrl_info, const <a class="el" href="classDataCodingScheme.html">DataCodingScheme</a> &amp;dcs)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="group__ASC.html#gb24e48f62777c7b6d7291bb338583de3">SsApiRc</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUssdHandler.html#738662c5eece26a12bd002e2e99e54ee">SendError</a> (<a class="el" href="SignalTypes_8hpp.html#29e54c8489e1aa33071c4307e1c111e7">Tipd</a> tipd, <a class="el" href="classSsErrorCode.html">SsErrorCode</a> error_code)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="group__ASC.html#gb24e48f62777c7b6d7291bb338583de3">SsApiRc</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUssdHandler.html#432788b84bd9d8500feb7ea008620734">SendRejection</a> (<a class="el" href="SignalTypes_8hpp.html#29e54c8489e1aa33071c4307e1c111e7">Tipd</a> tipd, <a class="el" href="classTaggedProblemCode.html">TaggedProblemCode</a> code=TaggedProblemCode::ResourceLimitation)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUssdHandler.html#b900150f6f9b1cf521c65cebbbd49f74">UssdHandler</a> ()</td></tr>

<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__ASC.html#gb24e48f62777c7b6d7291bb338583de3">SsApiRc</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUssdHandler.html#47ae6fe1a994761bbbf044022bff7256">BeginTransaction</a> (const SsStackMsgArgument &amp;arg)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual ReturnCode&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUssdHandler.html#d823c47ea2903ae3fc54b6e1cdd1a8a7">EndTransaction</a> (const <a class="el" href="SignalTypes_8hpp.html#29e54c8489e1aa33071c4307e1c111e7">Tipd</a> tipd)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual ReturnCode&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUssdHandler.html#122c4890724905e7553ae7e8cdf1c409">ProcessStackMsgArgument</a> (const SsStackMsgArgument &amp;arg)</td></tr>

<tr><td colspan="2"><br><h2>Friends</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUssdHandler.html#2fbae72a59a58d5aea85865d19ff0de1">UssdBeginMsg</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
The <em><a class="el" href="classUssdHandler.html">UssdHandler</a></em> is a SS handler responsible for handling and conducting network-originated USSD transactions. <br>
 The class provides methods to parse the data provided by the mobile network and forward that data as messages, as well as methods to reply to mobile network requests in various fashions. <br>
 The process of conducting transactions is a bit complicated. First the initial argument is received by the <em><a class="el" href="classSsDispatcher.html">SsDispatcher</a></em> which will create a <em><a class="el" href="classUssdBeginMsg.html">UssdBeginMsg</a></em> wrapping the argument. The message will be sent to the MMI applications. The application responsible for handling USSD transaction has to call the <em>BeginTransaction</em> method of the message. This is necessary because since the transaction originates from the mobile network it is not known which applications might be interested and therefore the <em><a class="el" href="classUssdBeginMsg.html">UssdBeginMsg</a></em> is sent to all applications.<br>
 The message method then will invoke the <em>BeginTransaction</em> of this handler which will register the transaction, extract the initial argument wrapped in the message, create the actual message containing the data and send that message to the application which reacted on the <em><a class="el" href="classUssdBeginMsg.html">UssdBeginMsg</a></em>. <br>
 After the transaction has been established further communication adheres to the regular communication mechanisms. <dl compact><dt><b>See also:</b></dt><dd>SsMainHandler <p>
<a class="el" href="classSsDispatcher.html">SsDispatcher</a> <p>
<a class="el" href="classUssdBeginMsg.html">UssdBeginMsg</a> </dd></dl>

<p>
<hr><h2>Member Enumeration Documentation</h2>
<a class="anchor" name="3278928dc0927883fe0e4b26760c17f3"></a><!-- doxytag: member="UssdHandler::@0" ref="3278928dc0927883fe0e4b26760c17f3" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">anonymous enum          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Enumerator defining the handler's identifier. <dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__ASC.html#gc8795f29689f69bee6afcebf7037d96f">HandlerId</a> </dd></dl>
<dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="3278928dc0927883fe0e4b26760c17f3c3c00614946417a3761f6638ebccbbef"></a><!-- doxytag: member="ID" ref="3278928dc0927883fe0e4b26760c17f3c3c00614946417a3761f6638ebccbbef" args="" -->ID</em>&nbsp;</td><td>
</td></tr>
</table>
</dl>
    </td>
  </tr>
</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="b900150f6f9b1cf521c65cebbbd49f74"></a><!-- doxytag: member="UssdHandler::UssdHandler" ref="b900150f6f9b1cf521c65cebbbd49f74" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">UssdHandler::UssdHandler           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="6c43ae4a9f539921f91125bfc3d03b31"></a><!-- doxytag: member="UssdHandler::Acknowledge" ref="6c43ae4a9f539921f91125bfc3d03b31" args="(Tipd tipd)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="group__ASC.html#gb24e48f62777c7b6d7291bb338583de3">SsApiRc</a> UssdHandler::Acknowledge           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="SignalTypes_8hpp.html#29e54c8489e1aa33071c4307e1c111e7">Tipd</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>tipd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sends a notification acknowledgement within the given (current) transaction. <br>
 A notification consists of an empty control info string and can only be sent in response to a <em><a class="el" href="classUssdNotifyMsg.html">UssdNotifyMsg</a></em>. The are no checks performed to ensure the latter.<br>
 The method creates an <em><a class="el" href="classSsUssdReqArg.html">SsUssdReqArg</a></em> argument with an empty control info string which is sent via the SsMainHandler. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tipd</em>&nbsp;</td><td>The tipd of the current transaction. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><em>InvalidTipd</em> - if the specified tipd does not match the tipd of the current transaction,<br>
 or any other code the <em>SsMainHandler</em> (<em>PostArgument</em>) might return. </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd>SsMainHandler </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="86b4889de6f291034776dc0809e05ee7"></a><!-- doxytag: member="UssdHandler::Acknowledge" ref="86b4889de6f291034776dc0809e05ee7" args="(const UssdNotifyMsg &amp;msg)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="group__ASC.html#gb24e48f62777c7b6d7291bb338583de3">SsApiRc</a> UssdHandler::Acknowledge           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classUssdNotifyMsg.html">UssdNotifyMsg</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>msg</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sends a notification acknowledgement within the given (current) transaction. <br>
 A notification consists of an empty control info string and can only be sent in response to a <em><a class="el" href="classUssdNotifyMsg.html">UssdNotifyMsg</a></em>. The are no checks performed to ensure the latter.<br>
 The method creates an <em><a class="el" href="classSsUssdReqArg.html">SsUssdReqArg</a></em> argument with an empty control info string which is sent via the SsMainHandler. This is a convenience method which extracts the tipd from a previously received message. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>msg</em>&nbsp;</td><td>The message from which to extract the tipd of the current transaction. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><em>InvalidTipd</em> - if the specified tipd does not match the tipd of the current transaction,<br>
 or any other code the <em>SsMainHandler</em> (<em>PostArgument</em>) might return. </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd>SsMainHandler </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="47ae6fe1a994761bbbf044022bff7256"></a><!-- doxytag: member="UssdHandler::BeginTransaction" ref="47ae6fe1a994761bbbf044022bff7256" args="(const SsStackMsgArgument &amp;arg)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="group__ASC.html#gb24e48f62777c7b6d7291bb338583de3">SsApiRc</a> UssdHandler::BeginTransaction           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const SsStackMsgArgument &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>arg</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Called by the <em><a class="el" href="classUssdBeginMsg.html">UssdBeginMsg</a></em> (<em>BeginTransaction</em>) to register the new transaction and initiate dispatch of the first message. <em>ProcessStackMsgArgument</em> is used to create the message holding the actual data. The new message is sent via the <em><a class="el" href="classMessageRouter.html">MessageRouter</a></em>. Further the transaction (the tipd and this handler) is registered with the <em>SsMainHandler</em>. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>arg</em>&nbsp;</td><td>The initial argument sent by the mobile network which needs to be processed. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><em>Success</em> - if the transaction was registered successfully and the new message sent out,<br>
 <em>UssdTransactionError</em> - if the handler was unable to create a message from the specified argument,<br>
 or any other code <em>RegisterTransaction</em> might return. </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="classUssdBeginMsg.html">UssdBeginMsg</a> <p>
SsMainHandler <p>
<a class="el" href="classMessageRouter.html">MessageRouter</a> </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="d823c47ea2903ae3fc54b6e1cdd1a8a7"></a><!-- doxytag: member="UssdHandler::EndTransaction" ref="d823c47ea2903ae3fc54b6e1cdd1a8a7" args="(const Tipd tipd)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">SsBaseHandler::ReturnCode UssdHandler::EndTransaction           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="SignalTypes_8hpp.html#29e54c8489e1aa33071c4307e1c111e7">Tipd</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>tipd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Called by the <em><a class="el" href="classSsDispatcher.html">SsDispatcher</a></em> to indicate the end of the transaction.<br>
 Creates and stores the transaction-end message (<em><a class="el" href="classUssdEndMsg.html">UssdEndMsg</a></em>) then delegates to the superclass method for further clean-ups. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tipd</em>&nbsp;</td><td>The tipd of the transaction to end. This is used for plausability checks since there can only be one concurrent transaction anyway. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><em>TipdMismatch</em> - if the tipd of the argument does not match the tipd of the current transaction,<br>
 or any other code the superclass method might return. </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="classSsDispatcher.html">SsDispatcher</a> <p>
<a class="el" href="classUssdEndMsg.html">UssdEndMsg</a> </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="61bae96e4b99e81d7d45983236baf489"></a><!-- doxytag: member="UssdHandler::GetHandlerId" ref="61bae96e4b99e81d7d45983236baf489" args="() const " --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="group__ASC.html#gc8795f29689f69bee6afcebf7037d96f">HandlerId</a> UssdHandler::GetHandlerId           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns the handler's identifier as specified in the anonymous enumeration. <dl compact><dt><b>Returns:</b></dt><dd>UssdHandlerId </dd></dl>

<p>
Reimplemented in <a class="el" href="classMobileOriginatedUssdHandler.html#2358bf47cc5e917cc734d88f13b6437c">MobileOriginatedUssdHandler</a>.    </td>
  </tr>
</table>
<a class="anchor" name="122c4890724905e7553ae7e8cdf1c409"></a><!-- doxytag: member="UssdHandler::ProcessStackMsgArgument" ref="122c4890724905e7553ae7e8cdf1c409" args="(const SsStackMsgArgument &amp;arg)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">SsBaseHandler::ReturnCode UssdHandler::ProcessStackMsgArgument           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const SsStackMsgArgument &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>arg</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This method is called by the <em><a class="el" href="classSsDispatcher.html">SsDispatcher</a></em> upon receiving a <em><a class="el" href="classStackMsgArgument.html">StackMsgArgument</a></em> or by the <em>BeginTransaction</em> method. The method checks whether the given argument is processable in any way (contains correct data), creates a new message object using the <em>CreateRequestMsg</em> and <em>CreateNotifyMsg</em> methods and stores the message by means of its superclass. Since the transaction is initiated by the mobile network the tipd has to be stored upon arrival of the first argument of the transaction. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>arg</em>&nbsp;</td><td>The wrapper object which should contain the <em><a class="el" href="classSsUssdIndArg.html">SsUssdIndArg</a></em> to be processed. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><em>OkMessageReady</em> - if a message was created,<br>
 <em>TipdMismatch</em> - if the tipd of the argument does not match the tipd of the current transaction,<br>
 <em>UnexpectedOperationCode</em> - if the argument's operation code does not match <em>ScUssdRequest</em> or <em>ScUssdNotify</em>,<br>
 <em>UnexpectedArgument</em> - if the argument is not an <em><a class="el" href="classSsUssdIndArg.html">SsUssdIndArg</a></em>,<br>
 or any other code <em>CreateRequestMsg</em> or <em>CreateNotifyMsg</em> might return. </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd>SsBaseHandler <p>
<a class="el" href="classSsDispatcher.html">SsDispatcher</a> </dd></dl>

<p>
Reimplemented in <a class="el" href="classMobileOriginatedUssdHandler.html#bd7a44487dcf1e3227b4cd9d1b429e6f">MobileOriginatedUssdHandler</a>.    </td>
  </tr>
</table>
<a class="anchor" name="7e66db4fcf68d5a5e2564e642cd86a27"></a><!-- doxytag: member="UssdHandler::Reply" ref="7e66db4fcf68d5a5e2564e642cd86a27" args="(Tipd tipd, const WString &amp;ctrl_info, const DataCodingScheme &amp;dcs)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="group__ASC.html#gb24e48f62777c7b6d7291bb338583de3">SsApiRc</a> UssdHandler::Reply           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="SignalTypes_8hpp.html#29e54c8489e1aa33071c4307e1c111e7">Tipd</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>tipd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="classWString.html">WString</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>ctrl_info</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="classDataCodingScheme.html">DataCodingScheme</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>dcs</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sends a return result within the given (current) transaction. <br>
 The method creates an <em><a class="el" href="classSsUssdReqArg.html">SsUssdReqArg</a></em> argument which is sent via the <em>SsMainHandler</em>. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tipd</em>&nbsp;</td><td>The tipd of the current transaction. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ctrl_info</em>&nbsp;</td><td>The control info string containing the data which should be sent. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dcs</em>&nbsp;</td><td>The data coding scheme describing how the control info string is encoded. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><em>InvalidTipd</em> - if the specified tipd does not match the tipd of the current transaction,<br>
 or any other code the <em>SsMainHandler</em> (<em>PostArgument</em>) might return. </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd>SsMainHandler </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="713abfb8272a648deea9137bf6495e0c"></a><!-- doxytag: member="UssdHandler::Reply" ref="713abfb8272a648deea9137bf6495e0c" args="(const UssdRequestMsg &amp;msg, const WString &amp;ctrl_info, const DataCodingScheme &amp;dcs)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="group__ASC.html#gb24e48f62777c7b6d7291bb338583de3">SsApiRc</a> UssdHandler::Reply           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classUssdRequestMsg.html">UssdRequestMsg</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="classWString.html">WString</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>ctrl_info</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="classDataCodingScheme.html">DataCodingScheme</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>dcs</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sends a return result within the given (current) transaction. <br>
 The method creates an <em><a class="el" href="classSsUssdReqArg.html">SsUssdReqArg</a></em> argument which is sent via the <em>SsMainHandler</em>. This is a convenience method which extracts the tipd from a previously received message. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>msg</em>&nbsp;</td><td>The message from which to extract the tipd of the current transaction. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ctrl_info</em>&nbsp;</td><td>The control info string containing the data which should be sent. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dcs</em>&nbsp;</td><td>The data coding scheme describing how the control info string is encoded. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><em>InvalidTipd</em> - if the specified tipd does not match the tipd of the current transaction,<br>
 or any other code the <em>SsMainHandler</em> (<em>PostArgument</em>) might return. </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd>SsMainHandler </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="738662c5eece26a12bd002e2e99e54ee"></a><!-- doxytag: member="UssdHandler::SendError" ref="738662c5eece26a12bd002e2e99e54ee" args="(Tipd tipd, SsErrorCode error_code)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="group__ASC.html#gb24e48f62777c7b6d7291bb338583de3">SsApiRc</a> UssdHandler::SendError           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="SignalTypes_8hpp.html#29e54c8489e1aa33071c4307e1c111e7">Tipd</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>tipd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classSsErrorCode.html">SsErrorCode</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>error_code</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Terminates the current transaction with an error request (<em><a class="el" href="classSsErrReqArg.html">SsErrReqArg</a></em>). The argument is sent via the <em>SsMainHandler</em> and afterwards the transaction is released. The handler itself is reset as well. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tipd</em>&nbsp;</td><td>The tipd of the transaction to terminate. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>error_code</em>&nbsp;</td><td>The error code describing the cause of the termination. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><em>InvalidTipd</em> - if the specified tipd does not match the tipd of the current transaction,<br>
 or any other code the <em>SsMainHandler</em> (<em>PostArgument</em>) might return. </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="classSsRejReqArg.html">SsRejReqArg</a> <p>
SsMainHandler </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="432788b84bd9d8500feb7ea008620734"></a><!-- doxytag: member="UssdHandler::SendRejection" ref="432788b84bd9d8500feb7ea008620734" args="(Tipd tipd, TaggedProblemCode code=TaggedProblemCode::ResourceLimitation)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="group__ASC.html#gb24e48f62777c7b6d7291bb338583de3">SsApiRc</a> UssdHandler::SendRejection           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="SignalTypes_8hpp.html#29e54c8489e1aa33071c4307e1c111e7">Tipd</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>tipd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classTaggedProblemCode.html">TaggedProblemCode</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>code</em> = <code>TaggedProblemCode::ResourceLimitation</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Terminates the current transaction with a reject request (<em><a class="el" href="classSsRejReqArg.html">SsRejReqArg</a></em>). The argument is sent via the <em>SsMainHandler</em> and afterwards the transaction is released. The handler itself is reset as well. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tipd</em>&nbsp;</td><td>The tipd of the transaction to terminate. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>code</em>&nbsp;</td><td>The problem code describing the cause of the rejection. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><em>InvalidTipd</em> - if the specified tipd does not match the tipd of the current transaction,<br>
 or any other code the <em>SsMainHandler</em> (<em>PostArgument</em>) might return. </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="classSsRejReqArg.html">SsRejReqArg</a> <p>
SsMainHandler </dd></dl>
    </td>
  </tr>
</table>
<hr><h2>Friends And Related Function Documentation</h2>
<a class="anchor" name="2fbae72a59a58d5aea85865d19ff0de1"></a><!-- doxytag: member="UssdHandler::UssdBeginMsg" ref="2fbae72a59a58d5aea85865d19ff0de1" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">friend class <a class="el" href="classUssdBeginMsg.html">UssdBeginMsg</a><code> [friend]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This is needed to allow the message object access to the <em>BeginTransaction</em> method.     </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li>Asc/<a class="el" href="UssdHandler_8hpp-source.html">UssdHandler.hpp</a><li>Asc/<a class="el" href="UssdHandler_8cpp.html">UssdHandler.cpp</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Wed Jan 25 02:18:21 2006 for APOXI by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6-NO </small></address>
</body>
</html>
