<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>APOXI: Trap Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.6-NO -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li id="current"><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="classes.html"><span>Alphabetical&nbsp;List</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Data&nbsp;Fields</span></a></li>
  </ul></div>
<h1>Trap Class Reference<br>
<small>
[<a class="el" href="group__OS.html">Operating System</a>]</small>
</h1><!-- doxytag: class="Trap" --><code>#include &lt;<a class="el" href="Nuc32_2Trap_8hpp-source.html">Apoxi/Kernel/Os/Nuc32/Trap.hpp</a>&gt;</code>
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTrap.html#306a613015f536229f6a6c3529d1149d">Assertion</a> (BOOLEAN arg)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTrap.html#c128c1c97da2955bd12e37c9f0b4df2d">Assertion</a> (BOOLEAN arg, CHAR *filename, INT line)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTrap.html#4e29e4a293b3724c9a3747e5825c2638">Assertion</a> (BOOLEAN arg)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="classProvider.html">Provider</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTrap.html#9ac15835393ead858c4346b61afca432">GetProvider</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="classProvider.html">Provider</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTrap.html#d675dfc59c4cf05ca87b6a4ff0f6cfd8">GetProvider</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTrap.html#5e870b1be9f605ff34f6fe93d27dffba">Init</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTrap.html#a2a831c3506b06d08b0fd5e599d10d04">Init</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTrap.html#f86d95ebbcfb83dd9b1e7823e3aa4a66">SetHandler</a> (<a class="el" href="Nuc32_2Trap_8hpp.html#f2ca975e208db107c137048e451cef03">TrapCB</a> <a class="el" href="Win32_2Audio_8cpp.html#6da54de6945ef81ae1423f01e5c1c8c7">hdl</a>)</td></tr>

</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="306a613015f536229f6a6c3529d1149d"></a><!-- doxytag: member="Trap::Assertion" ref="306a613015f536229f6a6c3529d1149d" args="(BOOLEAN arg)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void Trap::Assertion           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">BOOLEAN&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>arg</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Be aware, that assertion handling is different for host and target. <h2><a class="anchor" name="Host">
Host</a></h2>
ASSERT from mfc is called <h2><a class="anchor" name="Target">
Target</a></h2>
You have to set compiler defines (for example in your local build script file) for apoxi assertion handling<ul>
<li>standard handling<br>
 Assertion(callstack and some CPU registers) will be stored in flash memory<br>
<br>
</li><li>set define APOXI_ENABLE_TRAP_INFO_SCREEN<br>
 Assertion(sourcefile and line) will be displayed at LCD screen</li></ul>
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>arg</em>&nbsp;</td><td>raise condition </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="c128c1c97da2955bd12e37c9f0b4df2d"></a><!-- doxytag: member="Trap::Assertion" ref="c128c1c97da2955bd12e37c9f0b4df2d" args="(BOOLEAN arg, CHAR *filename, INT line)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void Trap::Assertion           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>arg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>CHAR *&nbsp;</td>
          <td class="mdname" nowrap> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>INT&nbsp;</td>
          <td class="mdname" nowrap> <em>line</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="4e29e4a293b3724c9a3747e5825c2638"></a><!-- doxytag: member="Trap::Assertion" ref="4e29e4a293b3724c9a3747e5825c2638" args="(BOOLEAN arg)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void Trap::Assertion           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">BOOLEAN&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>arg</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="9ac15835393ead858c4346b61afca432"></a><!-- doxytag: member="Trap::GetProvider" ref="9ac15835393ead858c4346b61afca432" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static <a class="el" href="classProvider.html">Provider</a>&amp; Trap::GetProvider           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="classProvider.html">Provider</a> which represents the data of previously occured traps.</dd></dl>
Each row in <a class="el" href="classTrap.html">Trap</a> Info <a class="el" href="classProvider.html">Provider</a> represents one trap event. The trap information can be read out of the columns. Depending on the hardware and on the trap class, different information is provided per column. Use method GetDataItem(INT columnid, INT row, DataItem&amp; item) to read out the trap data.<h2><a class="anchor" name="egold">
EGold / OSE 166</a></h2>
<table border="1" cellspacing="3" cellpadding="3">
<tr>
<td><b>column</b> </td><td><b>type</b> </td><td><b>description</b>  </td></tr>
<tr>
<td>0 </td><td><a class="el" href="classWString.html">WString</a> </td><td>trap date and time  </td></tr>
<tr>
<td>1 </td><td>Number </td><td>trap class  </td></tr>
<tr>
<td>2 </td><td><a class="el" href="classWString.html">WString</a> </td><td>system stack  </td></tr>
<tr>
<td>3 </td><td><a class="el" href="classWString.html">WString</a> </td><td>log data  </td></tr>
</table>
<h2><a class="anchor" name="sgold">
SGold / Nucleus 32</a></h2>
<table border="1" cellspacing="3" cellpadding="3">
<tr>
<td><b>column</b> </td><td><b>type</b> </td><td><b>description</b>  </td></tr>
<tr>
<td>0 </td><td><a class="el" href="classWString.html">WString</a> </td><td>trap date and time  </td></tr>
<tr>
<td>1 </td><td>Number </td><td>trap class<br>
 0..2 <b>HW <a class="el" href="classTrap.html">Trap</a></b> (<a class="el" href="classTrap.html">Trap</a> Class A..C)<br>
 &gt; 2 <b>SW <a class="el" href="classTrap.html">Trap</a></b>   </td></tr>
</table>
The following columns are only provided if define TRAP_USE_EXTENDED_FORMAT is set by driver.<h3><a class="anchor" name="hw_trap">
HW Trap</a></h3>
<table border="1" cellspacing="3" cellpadding="3">
<tr>
<td>2 </td><td><a class="el" href="classWString.html">WString</a> </td><td>register R0  </td></tr>
<tr>
<td>3 </td><td><a class="el" href="classWString.html">WString</a> </td><td>register R1  </td></tr>
<tr>
<td>4 </td><td><a class="el" href="classWString.html">WString</a> </td><td>register R2  </td></tr>
<tr>
<td>5 </td><td><a class="el" href="classWString.html">WString</a> </td><td>register R3  </td></tr>
<tr>
<td>6 </td><td><a class="el" href="classWString.html">WString</a> </td><td>register R4  </td></tr>
<tr>
<td>7 </td><td><a class="el" href="classWString.html">WString</a> </td><td>register R5  </td></tr>
<tr>
<td>8 </td><td><a class="el" href="classWString.html">WString</a> </td><td>register R6  </td></tr>
<tr>
<td>9 </td><td><a class="el" href="classWString.html">WString</a> </td><td>register R7  </td></tr>
<tr>
<td>10 </td><td><a class="el" href="classWString.html">WString</a> </td><td>register R8  </td></tr>
<tr>
<td>11 </td><td><a class="el" href="classWString.html">WString</a> </td><td>register R9  </td></tr>
<tr>
<td>12 </td><td><a class="el" href="classWString.html">WString</a> </td><td>register R10  </td></tr>
<tr>
<td>13 </td><td><a class="el" href="classWString.html">WString</a> </td><td>register R11  </td></tr>
<tr>
<td>14 </td><td><a class="el" href="classWString.html">WString</a> </td><td>register R12  </td></tr>
<tr>
<td>15 </td><td><a class="el" href="classWString.html">WString</a> </td><td>register R13  </td></tr>
<tr>
<td>16 </td><td><a class="el" href="classWString.html">WString</a> </td><td>register R14  </td></tr>
<tr>
<td>17 </td><td><a class="el" href="classWString.html">WString</a> </td><td>register R15  </td></tr>
<tr>
<td>18 </td><td><a class="el" href="classWString.html">WString</a> </td><td>register SPSR  </td></tr>
<tr>
<td>19 </td><td><a class="el" href="classWString.html">WString</a> </td><td>register DFAR  </td></tr>
<tr>
<td>20 </td><td><a class="el" href="classWString.html">WString</a> </td><td>register DFSR  </td></tr>
<tr>
<td>21+n </td><td><a class="el" href="classWString.html">WString</a> </td><td>stack data dump  </td></tr>
</table>
<h3><a class="anchor" name="sw_trap">
SW Trap</a></h3>
<table border="1" cellspacing="3" cellpadding="3">
<tr>
<td>2 </td><td><a class="el" href="classWString.html">WString</a> </td><td>trap ID  </td></tr>
<tr>
<td>3 </td><td><a class="el" href="classWString.html">WString</a> </td><td>file name  </td></tr>
<tr>
<td>4 </td><td><a class="el" href="classWString.html">WString</a> </td><td>line number  </td></tr>
<tr>
<td>5 </td><td><a class="el" href="classWString.html">WString</a> </td><td>log data  </td></tr>
</table>
<p>
Because ColumnCount() is returning different values depending which row is accessed (trap class), SetParameter(const DataItem &amp;item) is used to define the row ID before calling ColumnCount(). For example, if the column count for row 10 is needed, the following sequence has to be called: <div class="fragment"><pre class="fragment">            <a class="code" href="classProvider.html">Provider</a>&amp; provider = <a class="code" href="classTrap.html#d675dfc59c4cf05ca87b6a4ff0f6cfd8">Trap::GetProvider</a>();
            <a class="code" href="classDataItem.html">DataItem</a> data_item;
            data_item.<a class="code" href="classDataItem.html#8db50fdb5480be8a97e8f925be487b11">SetNumber</a>(10);
            provider.<a class="code" href="classProvider.html#a5d590bad1d9d32cb9f81503392731e7">SetParameter</a>(data_item);
            <a class="code" href="NucInc_8hpp.html#feeffe52c8fd59db7c61cf8b02042dbf">INT</a> column_count = provicer.ColumnCount(); <span class="comment">// column count for row 10</span>
</pre></div>     </td>
  </tr>
</table>
<a class="anchor" name="d675dfc59c4cf05ca87b6a4ff0f6cfd8"></a><!-- doxytag: member="Trap::GetProvider" ref="d675dfc59c4cf05ca87b6a4ff0f6cfd8" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classProvider.html">Provider</a> &amp; Trap::GetProvider           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="classProvider.html">Provider</a> which represents the data of previously occured traps. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="5e870b1be9f605ff34f6fe93d27dffba"></a><!-- doxytag: member="Trap::Init" ref="5e870b1be9f605ff34f6fe93d27dffba" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void Trap::Init           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a2a831c3506b06d08b0fd5e599d10d04"></a><!-- doxytag: member="Trap::Init" ref="a2a831c3506b06d08b0fd5e599d10d04" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void Trap::Init           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="f86d95ebbcfb83dd9b1e7823e3aa4a66"></a><!-- doxytag: member="Trap::SetHandler" ref="f86d95ebbcfb83dd9b1e7823e3aa4a66" args="(TrapCB hdl)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void Trap::SetHandler           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="Nuc32_2Trap_8hpp.html#f2ca975e208db107c137048e451cef03">TrapCB</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hdl</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li>Kernel/Os/Nuc32/<a class="el" href="Nuc32_2Trap_8hpp-source.html">Trap.hpp</a><li>Kernel/Os/Win32/<a class="el" href="Win32_2Trap_8hpp-source.html">Trap.hpp</a><li>Kernel/Os/Nuc32/<a class="el" href="Nuc32_2Trap_8cpp.html">Trap.cpp</a><li>Kernel/Os/Win32/<a class="el" href="Win32_2Trap_8cpp.html">Trap.cpp</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Wed Jan 25 02:13:43 2006 for APOXI by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6-NO </small></address>
</body>
</html>
