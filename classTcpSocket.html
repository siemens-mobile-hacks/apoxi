<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>APOXI: TcpSocket Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.6-NO -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li id="current"><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="classes.html"><span>Alphabetical&nbsp;List</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Data&nbsp;Fields</span></a></li>
  </ul></div>
<h1>TcpSocket Class Reference<br>
<small>
[<a class="el" href="group__Socket.html">Socket</a>]</small>
</h1><!-- doxytag: class="TcpSocket" --><!-- doxytag: inherits="TcpSocketBase" --><code>#include &lt;<a class="el" href="TcpSocket_8hpp-source.html">Apoxi/Socket/TcpSocket.hpp</a>&gt;</code>
<p>
Inheritance diagram for TcpSocket:<p><center><img src="classTcpSocket__inherit__graph.png" border="0" usemap="#TcpSocket__inherit__map" alt="Inheritance graph"></center>
<map name="TcpSocket__inherit__map">
<area href="classFtpDataSocket.html" shape="rect" coords="7,380,116,407" alt="">
<area href="classFtpSocket.html" shape="rect" coords="140,380,223,407" alt="">
<area href="classHttpSocket.html" shape="rect" coords="247,380,335,407" alt="">
<area href="classRegTcpSocket.html" shape="rect" coords="359,380,465,407" alt="">
<area href="classTcpNetAdapter.html" shape="rect" coords="489,380,599,407" alt="">
<area href="classTcpTestSocket.html" shape="rect" coords="623,380,729,407" alt="">
<area href="classTcpSocketBase.html" shape="rect" coords="293,231,408,257" alt="">
<area href="classInetSocket.html" shape="rect" coords="308,156,393,183" alt="">
<area href="classSocket.html" shape="rect" coords="320,81,381,108" alt="">
<area href="classNonCloneable.html" shape="rect" coords="297,7,404,33" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center>Collaboration diagram for TcpSocket:<p><center><img src="classTcpSocket__coll__graph.png" border="0" usemap="#TcpSocket__coll__map" alt="Collaboration graph"></center>
<map name="TcpSocket__coll__map">
<area href="classTcpSocketBase.html" shape="rect" coords="561,343,676,369" alt="">
<area href="classInetSocket.html" shape="rect" coords="525,252,611,279" alt="">
<area href="classSocketData.html" shape="rect" coords="384,343,475,369" alt="">
<area href="classSocket.html" shape="rect" coords="553,175,615,201" alt="">
<area href="classNonCloneable.html" shape="rect" coords="531,84,637,111" alt="">
<area href="classSocketEventListener.html" shape="rect" coords="661,84,805,111" alt="">
<area href="classSysSocket.html" shape="rect" coords="203,252,288,279" alt="">
<area href="classSysSocketBase.html" shape="rect" coords="188,175,303,201" alt="">
<area href="structPppCallBackData.html" shape="rect" coords="35,7,160,33" alt="">
<area href="structPppSetupCallBackData.html" shape="rect" coords="185,84,348,111" alt="">
<area href="classPppDataConn.html" shape="rect" coords="393,84,497,111" alt="">
<area href="classExecutionContext.html" shape="rect" coords="319,252,447,279" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">BOOLEAN&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTcpSocket.html#3eb39efff2ac1f0520f687d10078a7c3">Connect</a> (const <a class="el" href="classInetSocketAddr.html">InetSocketAddr</a> &amp;to, BOOLEAN event=<a class="el" href="Kernel_2Types_8hpp.html#bf218ebc7e2ed90798d1f23a29b7ad09">FALSE</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">BOOLEAN&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTcpSocket.html#72c4403b02b8d1e7dbc32b8ae3971f63">HandOver</a> (<a class="el" href="classTcpSocket.html">TcpSocket</a> &amp;to_socket)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">BOOLEAN&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTcpSocket.html#06f65d0e0d2e00c99f5c64c7530bd18b">Open</a> (const <a class="el" href="classInetSocketAddr.html">InetSocketAddr</a> *local_addr=0, BOOLEAN may_reuse_addr=<a class="el" href="Kernel_2Types_8hpp.html#f5ab51ffc8d377653c77e0c7ba1867f8">TRUE</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">INT&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTcpSocket.html#88eee4689d2880cad989240da527a666">Read</a> (void *buf, INT buflen)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTcpSocket.html#132aa72af141d611f8bad96ba585a79f">TcpSocket</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">INT&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTcpSocket.html#3314af1cb2c6142c23e5f520dfb6bc1f">Write</a> (const void *buf, INT buflen)</td></tr>

<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTcpSocket.html#f33e4473a533b2b394e54c40dc8a8980">OnControlMsg</a> (const <a class="el" href="classSocketControlMsg.html">SocketControlMsg</a> &amp;msg)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
<a class="el" href="classTcpSocket.html">TcpSocket</a> exposes interfaces to write / read data from TCP streams. 
<p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="132aa72af141d611f8bad96ba585a79f"></a><!-- doxytag: member="TcpSocket::TcpSocket" ref="132aa72af141d611f8bad96ba585a79f" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">TcpSocket::TcpSocket           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="3eb39efff2ac1f0520f687d10078a7c3"></a><!-- doxytag: member="TcpSocket::Connect" ref="3eb39efff2ac1f0520f687d10078a7c3" args="(const InetSocketAddr &amp;to, BOOLEAN event=FALSE)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">BOOLEAN TcpSocket::Connect           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classInetSocketAddr.html">InetSocketAddr</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>to</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>event</em> = <code><a class="el" href="Kernel_2Types_8hpp.html#bf218ebc7e2ed90798d1f23a29b7ad09">FALSE</a></code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Establish a TCP connection to the specified address. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>to</em>&nbsp;</td><td>remote address to connect to </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>event</em>&nbsp;</td><td>flag indicating if connect should block (using an active wait) or if it should fire an asynchronous event when the connection to the remote address could be established or not. Per default (due to backwards compatibility) this method will block until the connect operation is finished. As this can take quite some time it is recommended to use the event driven approach by setting this flag to <code>TRUE</code>. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="72c4403b02b8d1e7dbc32b8ae3971f63"></a><!-- doxytag: member="TcpSocket::HandOver" ref="72c4403b02b8d1e7dbc32b8ae3971f63" args="(TcpSocket &amp;to_socket)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">BOOLEAN TcpSocket::HandOver           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classTcpSocket.html">TcpSocket</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>to_socket</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Hands over itself to <em>to_socket</em>. This socket is then reverted to closed state and hence does not operate any more. Instead, <em>to_socket</em> continues operation. This method should only be used to hand over a socket between execution contexts if needed. Note that if you hand over a socket from one execution context to another, also the execution context to which <em>to_socket</em> belongs must have initialized a socket handler. For the hand over to succeed this socket must be in open state and <em>to_socket</em> must be in closed state. If the hand over can not be performed <code>FALSE</code> is returned.<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="classExecutionContext.html">ExecutionContext</a> <p>
<a class="el" href="classSocketHandler.html">SocketHandler</a></dd></dl>
<dl compact><dt><b>Returns:</b></dt><dd>Success of hand over. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="f33e4473a533b2b394e54c40dc8a8980"></a><!-- doxytag: member="TcpSocket::OnControlMsg" ref="f33e4473a533b2b394e54c40dc8a8980" args="(const SocketControlMsg &amp;msg)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void TcpSocket::OnControlMsg           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classSocketControlMsg.html">SocketControlMsg</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>msg</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Translates the socket control message <em>msg</em> into a socket event and routes it accordingly. If a listener is set, its OnSocketEvent method is called. Otherwise the messages are discarded. 
<p>
Implements <a class="el" href="classInetSocket.html#068f4883a5c6b45f93eb2812ff7d38b5">InetSocket</a>.    </td>
  </tr>
</table>
<a class="anchor" name="06f65d0e0d2e00c99f5c64c7530bd18b"></a><!-- doxytag: member="TcpSocket::Open" ref="06f65d0e0d2e00c99f5c64c7530bd18b" args="(const InetSocketAddr *local_addr=0, BOOLEAN may_reuse_addr=TRUE)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">BOOLEAN TcpSocket::Open           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classInetSocketAddr.html">InetSocketAddr</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>local_addr</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>may_reuse_addr</em> = <code><a class="el" href="Kernel_2Types_8hpp.html#f5ab51ffc8d377653c77e0c7ba1867f8">TRUE</a></code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Open TCP type socket. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>local_addr</em>&nbsp;</td><td>local address to bind socket to </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>may_reuse_addr</em>&nbsp;</td><td>local address may be bound by multiple sockets </td></tr>
  </table>
</dl>

<p>
Reimplemented from <a class="el" href="classTcpSocketBase.html#d3667f7a2d07d82e70166d5a4a92a65f">TcpSocketBase</a>.    </td>
  </tr>
</table>
<a class="anchor" name="88eee4689d2880cad989240da527a666"></a><!-- doxytag: member="TcpSocket::Read" ref="88eee4689d2880cad989240da527a666" args="(void *buf, INT buflen)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">INT TcpSocket::Read           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void *&nbsp;</td>
          <td class="mdname" nowrap> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>INT&nbsp;</td>
          <td class="mdname" nowrap> <em>buflen</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Reads data from the socket.<p>
<dl compact><dt><b>Returns:</b></dt><dd>Number of bytes read or <code>-1</code> on failure. </dd></dl>

<p>
Reimplemented from <a class="el" href="classInetSocket.html#a120018cebf70285bea82e89be0dbf8a">InetSocket</a>.    </td>
  </tr>
</table>
<a class="anchor" name="3314af1cb2c6142c23e5f520dfb6bc1f"></a><!-- doxytag: member="TcpSocket::Write" ref="3314af1cb2c6142c23e5f520dfb6bc1f" args="(const void *buf, INT buflen)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">INT TcpSocket::Write           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const void *&nbsp;</td>
          <td class="mdname" nowrap> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>INT&nbsp;</td>
          <td class="mdname" nowrap> <em>buflen</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Writes data to the socket.<p>
<dl compact><dt><b>Returns:</b></dt><dd>Number of bytes written or <code>-1</code> on failure. </dd></dl>

<p>
Reimplemented from <a class="el" href="classInetSocket.html#ea24072381d85245550beade5e9a914d">InetSocket</a>.    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li>Socket/<a class="el" href="TcpSocket_8hpp-source.html">TcpSocket.hpp</a><li>Socket/<a class="el" href="TcpSocket_8cpp.html">TcpSocket.cpp</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Wed Jan 25 02:09:51 2006 for APOXI by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6-NO </small></address>
</body>
</html>
