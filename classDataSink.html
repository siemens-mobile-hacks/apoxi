<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>APOXI: DataSink Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.6-NO -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li id="current"><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="classes.html"><span>Alphabetical&nbsp;List</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Data&nbsp;Fields</span></a></li>
  </ul></div>
<h1>DataSink Class Reference<br>
<small>
[<a class="el" href="group__Auxiliary.html">Auxiliary</a>]</small>
</h1><!-- doxytag: class="DataSink" --><code>#include &lt;<a class="el" href="DataSink_8hpp-source.html">Apoxi/Auxiliary/DataSink.hpp</a>&gt;</code>
<p>
Inheritance diagram for DataSink:<p><center><img src="classDataSink__inherit__graph.png" border="0" usemap="#DataSink__inherit__map" alt="Inheritance graph"></center>
<map name="DataSink__inherit__map">
<area href="classFileDataSink.html" shape="rect" coords="9,81,108,108" alt="">
<area href="classHeapDataSink.html" shape="rect" coords="132,81,239,108" alt="">
<area href="classStringDataSink.html" shape="rect" coords="263,81,375,108" alt="">
<area href="classRamDataSink.html" shape="rect" coords="7,156,111,183" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center>Collaboration diagram for DataSink:<p><center><img src="classDataSink__coll__graph.png" border="0" usemap="#DataSink__coll__map" alt="Collaboration graph"></center>
<map name="DataSink__coll__map">
<area href="classDrmAsset.html" shape="rect" coords="7,7,87,34" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual BOOLEAN&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDataSink.html#5161255a007cdfc252056308a5c1d2ba">Close</a> ()=0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const <a class="el" href="classDrmAsset.html">DrmAsset</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDataSink.html#7c5e2d38a3a014db42dc555efcbe8bcb">GetDrmAsset</a> () const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual BOOLEAN&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDataSink.html#02dd92c3ea4989707bfe6047a0d01170">GetSize</a> (UINT32 &amp;size) const =0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual BOOLEAN&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDataSink.html#5755b49662a9d22eb54ac3541fe059eb">IsOpen</a> () const =0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual BOOLEAN&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDataSink.html#b4210276cc73c473d1d850390bc2d185">Open</a> ()=0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual UINT32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDataSink.html#fab7d2fdbcd45c4c6d9be4705d7f362a">Write</a> (UINT32 offset, const void HUGE *buf, UINT32 nbytes)=0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual UINT32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDataSink.html#a8bdd734da338e8e76a6d264c2b91930">Write</a> (const void HUGE *buf, UINT32 nbytes)=0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDataSink.html#6c8f784740721ec4c41a371bf31c0369">~DataSink</a> ()</td></tr>

<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDataSink.html#669bf2d39a0b279da3395f29a116c731">DataSink</a> (<a class="el" href="group__Auxiliary.html#g1636ba41b4ff8890cdcad97ed10fb4af">DrmLocalId</a> id)</td></tr>

<tr><td colspan="2"><br><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const <a class="el" href="classDrmAsset.html">DrmAsset</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDataSink.html#81a2fe241ab22d305acc980f8fba265a">m_drm_asset</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Class <a class="el" href="classDataSink.html">DataSink</a> is the abstraction of any kind of data sink where you can write to. 
<p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="6c8f784740721ec4c41a371bf31c0369"></a><!-- doxytag: member="DataSink::~DataSink" ref="6c8f784740721ec4c41a371bf31c0369" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">DataSink::~DataSink           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Destructs this instance.     </td>
  </tr>
</table>
<a class="anchor" name="669bf2d39a0b279da3395f29a116c731"></a><!-- doxytag: member="DataSink::DataSink" ref="669bf2d39a0b279da3395f29a116c731" args="(DrmLocalId id)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">DataSink::DataSink           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="group__Auxiliary.html#g1636ba41b4ff8890cdcad97ed10fb4af">DrmLocalId</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>id</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="5161255a007cdfc252056308a5c1d2ba"></a><!-- doxytag: member="DataSink::Close" ref="5161255a007cdfc252056308a5c1d2ba" args="()=0" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual BOOLEAN DataSink::Close           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [pure virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Closes the data sink. After closing the data sink it can not be written any more.<p>
<dl compact><dt><b>Returns:</b></dt><dd>Success of operation. </dd></dl>

<p>
Implemented in <a class="el" href="classFileDataSink.html#fcd276a07df50d6b705480e6cf24f028">FileDataSink</a>, <a class="el" href="classHeapDataSink.html#53fb628824479277792b4f44619fab76">HeapDataSink</a>, and <a class="el" href="classStringDataSink.html#8637d96b9e5c5f2a3f935ad9930e1e81">StringDataSink</a>.    </td>
  </tr>
</table>
<a class="anchor" name="7c5e2d38a3a014db42dc555efcbe8bcb"></a><!-- doxytag: member="DataSink::GetDrmAsset" ref="7c5e2d38a3a014db42dc555efcbe8bcb" args="() const " --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const <a class="el" href="classDrmAsset.html">DrmAsset</a>&amp; DataSink::GetDrmAsset           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns the DRM asset to process and validate DRM constraints and permissions.<p>
<dl compact><dt><b>Returns:</b></dt><dd>A reference to the DRM asset of this data sink. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="02dd92c3ea4989707bfe6047a0d01170"></a><!-- doxytag: member="DataSink::GetSize" ref="02dd92c3ea4989707bfe6047a0d01170" args="(UINT32 &amp;size) const =0" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual BOOLEAN DataSink::GetSize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">UINT32 &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>size</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [pure virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns the size of the data sink in terms of bytes. The size of the data sink is actually defined by the amount of data written at the end of the data sink.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>The actual size will be written into this variable. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Success of operation. </dd></dl>

<p>
Implemented in <a class="el" href="classFileDataSink.html#4b78de81e18cb3aa265060f6d925d92c">FileDataSink</a>, <a class="el" href="classHeapDataSink.html#d07a298ab0fbae3ac171f643cb1a5028">HeapDataSink</a>, and <a class="el" href="classStringDataSink.html#d3f708160bdfeae34df0c77feeb0efc8">StringDataSink</a>.    </td>
  </tr>
</table>
<a class="anchor" name="5755b49662a9d22eb54ac3541fe059eb"></a><!-- doxytag: member="DataSink::IsOpen" ref="5755b49662a9d22eb54ac3541fe059eb" args="() const =0" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual BOOLEAN DataSink::IsOpen           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [pure virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns whether the data sink is currently open or closed.<p>
<dl compact><dt><b>Returns:</b></dt><dd>Whether the data sink is open or not. </dd></dl>

<p>
Implemented in <a class="el" href="classFileDataSink.html#f2fb69336d5119a7356f176a7428fb1b">FileDataSink</a>, <a class="el" href="classHeapDataSink.html#9da39476481c5803403c73ea4220d1fc">HeapDataSink</a>, and <a class="el" href="classStringDataSink.html#2e877088267b180b1b4b9d5b3b9b002e">StringDataSink</a>.    </td>
  </tr>
</table>
<a class="anchor" name="b4210276cc73c473d1d850390bc2d185"></a><!-- doxytag: member="DataSink::Open" ref="b4210276cc73c473d1d850390bc2d185" args="()=0" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual BOOLEAN DataSink::Open           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [pure virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Opens the data sink for writing. The size of a freshly opened data sink is <code>0</code>. A data sink can only be written if it has been opened before.<p>
<dl compact><dt><b>Returns:</b></dt><dd>Success of operation. </dd></dl>

<p>
Implemented in <a class="el" href="classFileDataSink.html#58c1269233e28160ae6672f28b9c7c97">FileDataSink</a>, <a class="el" href="classHeapDataSink.html#ce20ed24443dcaab1caaa72f7f0d70fe">HeapDataSink</a>, and <a class="el" href="classStringDataSink.html#785caf6620a62039db55234b31921fc4">StringDataSink</a>.    </td>
  </tr>
</table>
<a class="anchor" name="fab7d2fdbcd45c4c6d9be4705d7f362a"></a><!-- doxytag: member="DataSink::Write" ref="fab7d2fdbcd45c4c6d9be4705d7f362a" args="(UINT32 offset, const void HUGE *buf, UINT32 nbytes)=0" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual UINT32 DataSink::Write           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">UINT32&nbsp;</td>
          <td class="mdname" nowrap> <em>offset</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const void HUGE *&nbsp;</td>
          <td class="mdname" nowrap> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>UINT32&nbsp;</td>
          <td class="mdname" nowrap> <em>nbytes</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [pure virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Writes <em>nbytes</em> bytes of buffer <em>buf</em> to the data sink at the given <em>offset</em>. Note, that this method is only allowed to be used to overwrite existing data. Hence, if the given <em>offset</em> plus the number of bytes to write <em>nbytes</em> is larger than the current size of the data sink then an assertion fails. Overriding methods must implement this assertion. Since this method only overrides existing data it does not affect the size of the data sink.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>offset</em>&nbsp;</td><td>The offset where to start writing. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buf</em>&nbsp;</td><td>The buffer to be written. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>nbytes</em>&nbsp;</td><td>The number of bytes to be written. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Number of bytes actually written. </dd></dl>

<p>
Implemented in <a class="el" href="classFileDataSink.html#77e2d92084b575beb60ca3b5fd9b854a">FileDataSink</a>, <a class="el" href="classHeapDataSink.html#b58e442849bc6832831f1ae2282cb23d">HeapDataSink</a>, and <a class="el" href="classStringDataSink.html#7c33519ce578ee6c66869bce74692881">StringDataSink</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a8bdd734da338e8e76a6d264c2b91930"></a><!-- doxytag: member="DataSink::Write" ref="a8bdd734da338e8e76a6d264c2b91930" args="(const void HUGE *buf, UINT32 nbytes)=0" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual UINT32 DataSink::Write           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const void HUGE *&nbsp;</td>
          <td class="mdname" nowrap> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>UINT32&nbsp;</td>
          <td class="mdname" nowrap> <em>nbytes</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [pure virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Writes <em>nbytes</em> bytes of buffer <em>buf</em> to the data sink. The data is written at the end of the data sink and hence increases the size of the data sink by the amount of bytes written.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>buf</em>&nbsp;</td><td>The buffer to be written. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>nbytes</em>&nbsp;</td><td>The number of bytes to be written. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Number of bytes actually written. </dd></dl>

<p>
Implemented in <a class="el" href="classFileDataSink.html#cd189ecf0841ec14c038c2c564508357">FileDataSink</a>, <a class="el" href="classHeapDataSink.html#a8a76f1f6973f1316a2ba13837ba8f69">HeapDataSink</a>, and <a class="el" href="classStringDataSink.html#fbc1bffa4fa6262519b8c06e038902e9">StringDataSink</a>.    </td>
  </tr>
</table>
<hr><h2>Field Documentation</h2>
<a class="anchor" name="81a2fe241ab22d305acc980f8fba265a"></a><!-- doxytag: member="DataSink::m_drm_asset" ref="81a2fe241ab22d305acc980f8fba265a" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const <a class="el" href="classDrmAsset.html">DrmAsset</a> <a class="el" href="classDataSink.html#81a2fe241ab22d305acc980f8fba265a">DataSink::m_drm_asset</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li>Auxiliary/<a class="el" href="DataSink_8hpp-source.html">DataSink.hpp</a><li>Auxiliary/<a class="el" href="DataSink_8cpp.html">DataSink.cpp</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Wed Jan 25 01:10:12 2006 for APOXI by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6-NO </small></address>
</body>
</html>
