<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>APOXI: HeapDataSource Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.6-NO -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li id="current"><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="classes.html"><span>Alphabetical&nbsp;List</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Data&nbsp;Fields</span></a></li>
  </ul></div>
<h1>HeapDataSource Class Reference</h1><!-- doxytag: class="HeapDataSource" --><!-- doxytag: inherits="DataSource" --><code>#include &lt;<a class="el" href="HeapDataSource_8hpp-source.html">Apoxi/Auxiliary/HeapDataSource.hpp</a>&gt;</code>
<p>
Inheritance diagram for HeapDataSource:<p><center><img src="classHeapDataSource__inherit__graph.png" border="0" usemap="#HeapDataSource__inherit__map" alt="Inheritance graph"></center>
<map name="HeapDataSource__inherit__map">
<area href="classDataSource.html" shape="rect" coords="23,7,113,34" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center>Collaboration diagram for HeapDataSource:<p><center><img src="classHeapDataSource__coll__graph.png" border="0" usemap="#HeapDataSource__coll__map" alt="Collaboration graph"></center>
<map name="HeapDataSource__coll__map">
<area href="classDataSource.html" shape="rect" coords="7,97,97,124" alt="">
<area href="classDrmAsset.html" shape="rect" coords="12,7,92,33" alt="">
<area href="classNiSharedPtr.html" shape="rect" coords="121,97,249,124" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual BOOLEAN&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHeapDataSource.html#008b867817f8f63bcc5da541538e38c2">Close</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual BOOLEAN&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHeapDataSource.html#4ddccd5960522e7addb1e5487303c43e">GetSize</a> (UINT32 &amp;size) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHeapDataSource.html#8e4a872097cb3586bc112cd3c48a4302">HeapDataSource</a> (const <a class="el" href="classNiSharedPtr.html">HeapDataSinkPtr</a> &amp;sink)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual BOOLEAN&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHeapDataSource.html#304c727617ab846959017e8dbfb1c4df">IsOpen</a> () const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual BOOLEAN&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHeapDataSource.html#17612b04442b629bb7e6beea534dc88b">Open</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual BOOLEAN&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHeapDataSource.html#d83347f5e903c5230a26bc1f306cf0cc">Read</a> (UINT32 offset, void HUGE *buffer, UINT32 max_count, UINT32 &amp;bytes_read)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual BOOLEAN&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHeapDataSource.html#12eabdaf55617c06a23cc9cae12fd341">Read</a> (UINT32 offset, void HUGE *buffer, UINT32 count)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual BOOLEAN&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHeapDataSource.html#1fe70cfe230ab6de469db98edf38e026">Read</a> (void HUGE *buffer, UINT32 max_count, UINT32 &amp;bytes_read)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual BOOLEAN&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHeapDataSource.html#75f404ac9f5a5ec18dc25bd44137637b">Read</a> (void HUGE *buffer, UINT32 count)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHeapDataSource.html#766aa9a357e34c84c85e90d4fa4877b4">~HeapDataSource</a> ()</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Class <a class="el" href="classHeapDataSource.html">HeapDataSource</a> implements a data source which reads from an associated <a class="el" href="classHeapDataSink.html">HeapDataSink</a> instance. 
<p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="8e4a872097cb3586bc112cd3c48a4302"></a><!-- doxytag: member="HeapDataSource::HeapDataSource" ref="8e4a872097cb3586bc112cd3c48a4302" args="(const HeapDataSinkPtr &amp;sink)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">HeapDataSource::HeapDataSource           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classNiSharedPtr.html">HeapDataSinkPtr</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>sink</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Creates a heap data source instance. This data source reads from a heap data sink which internally controls heap memory blocks. The heap data source has to be opened using method <a class="el" href="classHeapDataSource.html#17612b04442b629bb7e6beea534dc88b">Open()</a> before reading from it. On destruction, the heap data source will be closed if not explicitly done before.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sink</em>&nbsp;</td><td>The heap data sink to read from. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="766aa9a357e34c84c85e90d4fa4877b4"></a><!-- doxytag: member="HeapDataSource::~HeapDataSource" ref="766aa9a357e34c84c85e90d4fa4877b4" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">HeapDataSource::~HeapDataSource           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Destroys the heap data source.     </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="008b867817f8f63bcc5da541538e38c2"></a><!-- doxytag: member="HeapDataSource::Close" ref="008b867817f8f63bcc5da541538e38c2" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">BOOLEAN HeapDataSource::Close           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Closes the data source. After closing the data source it can not be read any more.<p>
<dl compact><dt><b>Returns:</b></dt><dd>Success of operation. </dd></dl>

<p>
Implements <a class="el" href="classDataSource.html#e7faa90744b52d945935717752b0af54">DataSource</a>.    </td>
  </tr>
</table>
<a class="anchor" name="4ddccd5960522e7addb1e5487303c43e"></a><!-- doxytag: member="HeapDataSource::GetSize" ref="4ddccd5960522e7addb1e5487303c43e" args="(UINT32 &amp;size) const " --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">BOOLEAN HeapDataSource::GetSize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">UINT32 &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>size</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns the size of the data source in terms of bytes.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>The actual size will be written into this variable. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Success of operation. </dd></dl>

<p>
Implements <a class="el" href="classDataSource.html#f87f087b6361f05cf230b647788b28cf">DataSource</a>.    </td>
  </tr>
</table>
<a class="anchor" name="304c727617ab846959017e8dbfb1c4df"></a><!-- doxytag: member="HeapDataSource::IsOpen" ref="304c727617ab846959017e8dbfb1c4df" args="() const " --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">BOOLEAN HeapDataSource::IsOpen           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns whether the data source is currently open or closed.<p>
<dl compact><dt><b>Returns:</b></dt><dd>Whether the data source is open or not. </dd></dl>

<p>
Implements <a class="el" href="classDataSource.html#025efc940dd0b0c69d582f4c7d9378b3">DataSource</a>.    </td>
  </tr>
</table>
<a class="anchor" name="17612b04442b629bb7e6beea534dc88b"></a><!-- doxytag: member="HeapDataSource::Open" ref="17612b04442b629bb7e6beea534dc88b" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">BOOLEAN HeapDataSource::Open           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Opens the data source for reading. Opening sets the current read position to the beginning of the data source. The read methods that do not use an offset argument always start to read at the current read position. A data source can only be read if it has been opened before.<p>
<dl compact><dt><b>Returns:</b></dt><dd>Success of operation. </dd></dl>

<p>
Implements <a class="el" href="classDataSource.html#3fccd66aad4d7bbfae66da52fc33d2e4">DataSource</a>.    </td>
  </tr>
</table>
<a class="anchor" name="d83347f5e903c5230a26bc1f306cf0cc"></a><!-- doxytag: member="HeapDataSource::Read" ref="d83347f5e903c5230a26bc1f306cf0cc" args="(UINT32 offset, void HUGE *buffer, UINT32 max_count, UINT32 &amp;bytes_read)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">BOOLEAN HeapDataSource::Read           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">UINT32&nbsp;</td>
          <td class="mdname" nowrap> <em>offset</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void HUGE *&nbsp;</td>
          <td class="mdname" nowrap> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>UINT32&nbsp;</td>
          <td class="mdname" nowrap> <em>max_count</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>UINT32 &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>bytes_read</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Reads up to <em>max_count</em> bytes from this data source starting at <em>offset</em> and copies them to the provided <em>buffer</em>. If the read operation was successful then argument <em>bytes_read</em> is set to the actual number of bytes read. This number may differ from <em>max_count</em> due to reaching the end of data while reading. Therefore it is essential to check <em>bytes_read</em> if <code>TRUE</code> is returned! Take care that if you start reading at the end of the data source, i.e. parameter offset is greater than or equal to the size of the data source, this method sets <em>bytes_read</em> to <code>0</code> and returns <code>TRUE</code>, signaling end of data! Note that this method does not affect the current read position. Please see the following sample function for completely reading a data source:<p>
<div class="fragment"><pre class="fragment">            <span class="keyword">static</span> <a class="code" href="NucInc_8hpp.html#50168fdbaa52d4a0b1c287d476050f12">BOOLEAN</a> ReadRandomDataSource(<a class="code" href="classDataSource.html">DataSource</a> &amp;open_ds)
            {
                <a class="code" href="group__Auxiliary.html#gf0f079cffe6a9de996135f9e74020775">ASSERT_DEBUG</a>(open_ds.<a class="code" href="classDataSource.html#025efc940dd0b0c69d582f4c7d9378b3">IsOpen</a>());

                <span class="comment">// Define read buffer.</span>
                <span class="keyword">const</span> <a class="code" href="NucInc_8hpp.html#45c20c14d3d8790a22153d08ab2eb2ff">UINT</a> buf_size = 128;
                <a class="code" href="NucInc_8hpp.html#35cd67ba7bb0db8105eb6267467535d7">CHAR</a> buf[buf_size];

                <span class="comment">// Define variables used for reading.</span>
                <a class="code" href="NucInc_8hpp.html#69afa2e50b905f4eab1f2df8a3fd9f23">UINT32</a> offset = 0;
                <a class="code" href="NucInc_8hpp.html#69afa2e50b905f4eab1f2df8a3fd9f23">UINT32</a> bytes_read;
                <a class="code" href="NucInc_8hpp.html#50168fdbaa52d4a0b1c287d476050f12">BOOLEAN</a> ok;

                <span class="comment">// Read whole data source in a loop.</span>
                <span class="keywordflow">while</span> ((ok = open_ds.<a class="code" href="classDataSource.html#f3ba71a02bd6320cad22f74994e11475">Read</a>(offset, buf, buf_size, bytes_read)) &amp;&amp;
                    bytes_read != 0)
                {
                    <span class="comment">// Use buf which is filled with valid data from index 0 to index</span>
                    <span class="comment">// (bytes_read - 1).</span>
                    <span class="comment">// ...</span>

                    <span class="comment">// Increase offset where to read next.</span>
                    offset += bytes_read;
                }

                <span class="comment">// ok is FALSE if a read error occurred, otherwise TRUE.</span>
                <span class="keywordflow">return</span> ok;
            }
</pre></div><p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>offset</em>&nbsp;</td><td>The zero-based position where to start reading the data source. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buffer</em>&nbsp;</td><td>The pointer to the buffer where the bytes read have to be copied to. It must be a valid pointer and the buffer must be at least <em>max_count</em> bytes in size. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>max_count</em>&nbsp;</td><td>The number of bytes to read. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bytes_read</em>&nbsp;</td><td>Bytes actually read.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Success of operation. </dd></dl>

<p>
Implements <a class="el" href="classDataSource.html#eefeeb5227d00c9184d046e7fb26b154">DataSource</a>.    </td>
  </tr>
</table>
<a class="anchor" name="12eabdaf55617c06a23cc9cae12fd341"></a><!-- doxytag: member="HeapDataSource::Read" ref="12eabdaf55617c06a23cc9cae12fd341" args="(UINT32 offset, void HUGE *buffer, UINT32 count)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">BOOLEAN HeapDataSource::Read           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">UINT32&nbsp;</td>
          <td class="mdname" nowrap> <em>offset</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void HUGE *&nbsp;</td>
          <td class="mdname" nowrap> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>UINT32&nbsp;</td>
          <td class="mdname" nowrap> <em>count</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Reads exactly <em>count</em> bytes from this data source starting at <em>offset</em> and copies them to the provided <em>buffer</em>. Note that this method does not affect the current read position.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>offset</em>&nbsp;</td><td>The zero-based position where to start reading the data source. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buffer</em>&nbsp;</td><td>The pointer to the buffer where the bytes read have to be copied to. It must be a valid pointer and the buffer must be at least <em>count</em> bytes in size. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>count</em>&nbsp;</td><td>The number of bytes to read.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Success of operation. </dd></dl>

<p>
Implements <a class="el" href="classDataSource.html#338a085ba9eab9e6a3e6e9c7001b5ea8">DataSource</a>.    </td>
  </tr>
</table>
<a class="anchor" name="1fe70cfe230ab6de469db98edf38e026"></a><!-- doxytag: member="HeapDataSource::Read" ref="1fe70cfe230ab6de469db98edf38e026" args="(void HUGE *buffer, UINT32 max_count, UINT32 &amp;bytes_read)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">BOOLEAN HeapDataSource::Read           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void HUGE *&nbsp;</td>
          <td class="mdname" nowrap> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>UINT32&nbsp;</td>
          <td class="mdname" nowrap> <em>max_count</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>UINT32 &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>bytes_read</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Reads up to <em>max_count</em> bytes from this data source starting at the current read position and copies them to the provided buffer. If the read operation was successful then argument <em>bytes_read</em> is set to the actual number of bytes read. This number may differ from <em>max_count</em> due to reaching the end of data while reading. Therefore it is essential to check <em>bytes_read</em> if <code>TRUE</code> is returned! Take care that if you start reading at the end of the data source, i.e. the current read position is greater than or equal to the size of the data source, this method sets <em>bytes_read</em> to <code>0</code> and returns <code>TRUE</code>, signaling end of data! The current read position is updated. Please see the following sample function for completely reading a data source:<p>
<div class="fragment"><pre class="fragment">            <span class="keyword">static</span> <a class="code" href="NucInc_8hpp.html#50168fdbaa52d4a0b1c287d476050f12">BOOLEAN</a> ReadSequentialDataSource(<a class="code" href="classDataSource.html">DataSource</a> &amp;open_ds)
            {
                <a class="code" href="group__Auxiliary.html#gf0f079cffe6a9de996135f9e74020775">ASSERT_DEBUG</a>(open_ds.<a class="code" href="classDataSource.html#025efc940dd0b0c69d582f4c7d9378b3">IsOpen</a>());

                <span class="comment">// Define read buffer.</span>
                <span class="keyword">const</span> <a class="code" href="NucInc_8hpp.html#45c20c14d3d8790a22153d08ab2eb2ff">UINT</a> buf_size = 128;
                <a class="code" href="NucInc_8hpp.html#35cd67ba7bb0db8105eb6267467535d7">CHAR</a> buf[buf_size];

                <span class="comment">// Define variables used for reading.</span>
                <a class="code" href="NucInc_8hpp.html#69afa2e50b905f4eab1f2df8a3fd9f23">UINT32</a> bytes_read;
                <a class="code" href="NucInc_8hpp.html#50168fdbaa52d4a0b1c287d476050f12">BOOLEAN</a> ok;

                <span class="comment">// Read whole data source in a loop.</span>
                <span class="keywordflow">while</span> ((ok = open_ds.<a class="code" href="classDataSource.html#f3ba71a02bd6320cad22f74994e11475">Read</a>(buf, buf_size, bytes_read)) &amp;&amp;
                    bytes_read != 0)
                {
                    <span class="comment">// Use buf which is filled with valid data from index 0 to index</span>
                    <span class="comment">// (bytes_read - 1).</span>
                    <span class="comment">// ...</span>
                }

                <span class="comment">// ok is FALSE if a read error occurred, otherwise TRUE.</span>
                <span class="keywordflow">return</span> ok;
            }
</pre></div><p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>buffer</em>&nbsp;</td><td>The pointer to the buffer where the bytes read have to be copied to. It must be a valid pointer and the buffer must be at least <em>max_count</em> bytes in size. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>max_count</em>&nbsp;</td><td>The number of bytes to read. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bytes_read</em>&nbsp;</td><td>Bytes actually read.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Success of operation. </dd></dl>

<p>
Implements <a class="el" href="classDataSource.html#5fd4fca9d7086f5de97aab737f2dd080">DataSource</a>.    </td>
  </tr>
</table>
<a class="anchor" name="75f404ac9f5a5ec18dc25bd44137637b"></a><!-- doxytag: member="HeapDataSource::Read" ref="75f404ac9f5a5ec18dc25bd44137637b" args="(void HUGE *buffer, UINT32 count)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">BOOLEAN HeapDataSource::Read           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void HUGE *&nbsp;</td>
          <td class="mdname" nowrap> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>UINT32&nbsp;</td>
          <td class="mdname" nowrap> <em>count</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Reads exactly <em>count</em> bytes from this data source starting at the current read position and copies them to the provided <em>buffer</em>. The current read position is updated.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>buffer</em>&nbsp;</td><td>The pointer to the buffer where the bytes read have to be copied to. It must be a valid pointer and the buffer must be at least <em>count</em> bytes in size. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>count</em>&nbsp;</td><td>The number of bytes to read.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Success of operation. </dd></dl>

<p>
Implements <a class="el" href="classDataSource.html#f3ba71a02bd6320cad22f74994e11475">DataSource</a>.    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li>Auxiliary/<a class="el" href="HeapDataSource_8hpp-source.html">HeapDataSource.hpp</a><li>Auxiliary/<a class="el" href="HeapDataSource_8cpp.html">HeapDataSource.cpp</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Wed Jan 25 01:18:37 2006 for APOXI by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6-NO </small></address>
</body>
</html>
