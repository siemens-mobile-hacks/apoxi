<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>APOXI: AddOns/MultiMedia/PngDecoder.hpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.6-NO -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<h1>AddOns/MultiMedia/PngDecoder.hpp</h1><a href="PngDecoder_8hpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*  ------------------------------------------------------------------------</span>
<a name="l00002"></a>00002 <span class="comment">    Copyright (C) COMNEON electronic technology GmbH &amp; Co. OHG.</span>
<a name="l00003"></a>00003 <span class="comment">    All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment">    ------------------------------------------------------------------------</span>
<a name="l00005"></a>00005 <span class="comment">    This document contains proprietary information belonging to COMNEON.</span>
<a name="l00006"></a>00006 <span class="comment">    Passing on and copying of this document, use and communication of its</span>
<a name="l00007"></a>00007 <span class="comment">    contents is not permitted without prior written authorisation.</span>
<a name="l00008"></a>00008 <span class="comment">    ------------------------------------------------------------------------ */</span>
<a name="l00009"></a>00009 
<a name="l00010"></a>00010 <span class="preprocessor">#if !defined(Apoxi_PngDecoder_hpp)</span>
<a name="l00011"></a><a class="code" href="PngDecoder_8hpp.html#e0b2663f4597ad278c2dea95b77aac89">00011</a> <span class="preprocessor"></span><span class="preprocessor">#define Apoxi_PngDecoder_hpp</span>
<a name="l00015"></a>00015 <span class="preprocessor"></span>
<a name="l00016"></a>00016 <span class="preprocessor"></span><span class="preprocessor">#include &lt;AddOns/libpng/png.h&gt;</span>
<a name="l00017"></a>00017 
<a name="l00018"></a>00018 <span class="keyword">class </span><a class="code" href="classBinData.html">BinData</a>;
<a name="l00019"></a>00019 
<a name="l00021"></a><a class="code" href="classPngDecoder.html">00021</a> <span class="keyword">class </span><a class="code" href="classPngDecoder.html">PngDecoder</a> {
<a name="l00022"></a>00022     <span class="keyword">public</span>:
<a name="l00023"></a><a class="code" href="classPngDecoder.html#0dc1de24c496b9be2a382bf3f9454580">00023</a>         <span class="keyword">enum</span> <a class="code" href="classPngDecoder.html#0dc1de24c496b9be2a382bf3f9454580">Error</a> {
<a name="l00024"></a>00024             <a class="code" href="classPngDecoder.html#0dc1de24c496b9be2a382bf3f9454580168bfca6d075ec13a57d8b41f4ae2795">NoError</a>, 
<a name="l00025"></a>00025             <a class="code" href="classPngDecoder.html#0dc1de24c496b9be2a382bf3f9454580157be27304faf744774fae07cef361b8">NoPngFormatError</a>, 
<a name="l00026"></a>00026             <a class="code" href="classPngDecoder.html#0dc1de24c496b9be2a382bf3f9454580ba47ed4f42f585e45f53227827a1ffbc">DecoderInitError</a>, 
<a name="l00027"></a>00027             <a class="code" href="classPngDecoder.html#0dc1de24c496b9be2a382bf3f94545809d401c546462de422727857fe72535d0">OutOfMemoryError</a>, 
<a name="l00028"></a>00028             <a class="code" href="classPngDecoder.html#0dc1de24c496b9be2a382bf3f945458026224ed2c720ea33a4ed82f64a572a5d">DecodingError</a>
<a name="l00029"></a>00029         };
<a name="l00030"></a>00030 
<a name="l00031"></a>00031     <span class="keyword">protected</span>:
<a name="l00032"></a>00032         <a class="code" href="classPngDecoder.html#457d185e382b7312501c17d0706a9071">PngDecoder</a>();
<a name="l00033"></a>00033         <span class="keyword">virtual</span> <a class="code" href="classPngDecoder.html#c029788d28a1551b584cf387f71bb127">~PngDecoder</a>();
<a name="l00034"></a>00034 
<a name="l00035"></a>00035     <span class="keyword">public</span>:
<a name="l00038"></a>00038         <span class="keyword">static</span> <a class="code" href="classPngDecoder.html">PngDecoder</a>* <a class="code" href="classPngDecoder.html#d26defdedb8ebe91a2d662b47138cd65">GetInstance</a>();
<a name="l00041"></a>00041         <span class="keywordtype">void</span> <a class="code" href="classPngDecoder.html#6bf1b564375c894848e38e9cb4b18a93">ReleaseInstance</a>();
<a name="l00042"></a>00042 
<a name="l00045"></a>00045         <span class="keyword">static</span> <a class="code" href="NucInc_8hpp.html#50168fdbaa52d4a0b1c287d476050f12">BOOLEAN</a> <a class="code" href="classPngDecoder.html#f3cd1b3d1060efd20e2e411aedd5c4d2">IsPng</a>(<span class="keyword">const</span> <a class="code" href="classBinData.html">BinData</a> &amp;<a class="code" href="BP30_2DrawChar__16Bpp_8cpp.html#53d08a8b90f54214294e3ec4d5e30d62">data</a>);
<a name="l00046"></a>00046 
<a name="l00056"></a>00056         <a class="code" href="NucInc_8hpp.html#50168fdbaa52d4a0b1c287d476050f12">BOOLEAN</a> <a class="code" href="classPngDecoder.html#ec0d1df70d059d118503114e57e4a77c">Attach</a>(<span class="keyword">const</span> <a class="code" href="classBinData.html">BinData</a> &amp;<a class="code" href="BP30_2DrawChar__16Bpp_8cpp.html#53d08a8b90f54214294e3ec4d5e30d62">data</a>);
<a name="l00057"></a>00057 
<a name="l00060"></a>00060         <a class="code" href="NucInc_8hpp.html#feeffe52c8fd59db7c61cf8b02042dbf">INT</a> <a class="code" href="classPngDecoder.html#fb556679b9f56f3be1ca6b86914abc62">GetWidth</a>() <span class="keyword">const</span>;
<a name="l00064"></a>00064         <a class="code" href="NucInc_8hpp.html#feeffe52c8fd59db7c61cf8b02042dbf">INT</a> <a class="code" href="classPngDecoder.html#0234b0f97df98fa6227665417a318fce">GetHeight</a>() <span class="keyword">const</span>;
<a name="l00068"></a>00068         <a class="code" href="NucInc_8hpp.html#50168fdbaa52d4a0b1c287d476050f12">BOOLEAN</a> <a class="code" href="classPngDecoder.html#0b3b52d15c5f18d920216b227b66d701">IsInterlaced</a>() <span class="keyword">const</span>;
<a name="l00069"></a>00069 
<a name="l00074"></a>00074         <a class="code" href="NucInc_8hpp.html#50168fdbaa52d4a0b1c287d476050f12">BOOLEAN</a> <a class="code" href="classPngDecoder.html#8b16df088bd2ee43c6c9324c8ae4b501">BeginDecoding</a>(<span class="keyword">const</span> <a class="code" href="classBinData.html">BinData</a> &amp;<a class="code" href="BP30_2DrawChar__16Bpp_8cpp.html#53d08a8b90f54214294e3ec4d5e30d62">data</a>);
<a name="l00075"></a>00075 
<a name="l00079"></a>00079         <a class="code" href="NucInc_8hpp.html#50168fdbaa52d4a0b1c287d476050f12">BOOLEAN</a> <a class="code" href="classPngDecoder.html#fbfbde0d08280b0adfe45f0a1553a6b6">IsTransparent</a>() <span class="keyword">const</span>;
<a name="l00080"></a>00080 
<a name="l00083"></a>00083         <a class="code" href="classColor.html">Color</a> <a class="code" href="classPngDecoder.html#d09cbb7ea779d38626818268e4914413">GetTransparentColor</a>() <span class="keyword">const</span>;
<a name="l00084"></a>00084 
<a name="l00087"></a>00087 <span class="comment">//      void GetTransparentColor(UINT8 &amp;red, UINT8 &amp;green, UINT8 &amp;blue) const;</span>
<a name="l00088"></a>00088 
<a name="l00093"></a>00093         <a class="code" href="NucInc_8hpp.html#50168fdbaa52d4a0b1c287d476050f12">BOOLEAN</a> <a class="code" href="classPngDecoder.html#3fa7818f17df44ff26258bad795e7eb6">HasNativeAlphaChannel</a>() <span class="keyword">const</span>;
<a name="l00094"></a>00094 
<a name="l00097"></a>00097         <a class="code" href="NucInc_8hpp.html#50168fdbaa52d4a0b1c287d476050f12">BOOLEAN</a> <a class="code" href="classPngDecoder.html#e4590b9975ac5ec2ce22f47fdf42b4d1">DecodeNextScanline</a>();
<a name="l00098"></a>00098 
<a name="l00108"></a>00108         <span class="keywordtype">void</span> <a class="code" href="classPngDecoder.html#1fd9a91752b548578ed8d8087181a4a0">InitPixelColorAccess</a>(<a class="code" href="NucInc_8hpp.html#feeffe52c8fd59db7c61cf8b02042dbf">INT</a> scanline_idx = 0);
<a name="l00109"></a>00109 
<a name="l00116"></a>00116         <span class="keywordtype">void</span> <a class="code" href="classPngDecoder.html#1384249fbc00a0061218461b402452e9">GetNextPixelColor</a>(<a class="code" href="NucInc_8hpp.html#d8ce12d83f204245685f98caf9d03944">UINT8</a> &amp;red, <a class="code" href="NucInc_8hpp.html#d8ce12d83f204245685f98caf9d03944">UINT8</a> &amp;green, <a class="code" href="NucInc_8hpp.html#d8ce12d83f204245685f98caf9d03944">UINT8</a> &amp;blue, <a class="code" href="NucInc_8hpp.html#d8ce12d83f204245685f98caf9d03944">UINT8</a> &amp;alpha);
<a name="l00117"></a>00117 
<a name="l00119"></a>00119         <span class="keywordtype">void</span> <a class="code" href="classPngDecoder.html#3c4c1434f60fd83bb7c41d98c78327ba">EndDecoding</a>();
<a name="l00120"></a>00120 
<a name="l00124"></a>00124         <a class="code" href="classPngDecoder.html#0dc1de24c496b9be2a382bf3f9454580">Error</a> <a class="code" href="classPngDecoder.html#6daef1237a39a76ed3e4e13ee093e72c">GetLastError</a>() <span class="keyword">const</span>;
<a name="l00125"></a>00125 
<a name="l00126"></a>00126     <span class="keyword">protected</span>:
<a name="l00128"></a>00128         <span class="keywordtype">void</span> <a class="code" href="classPngDecoder.html#2bb55ef2dd17596eb30f722f44f68710">CleanUp</a>();
<a name="l00129"></a>00129 
<a name="l00131"></a>00131         <a class="code" href="NucInc_8hpp.html#50168fdbaa52d4a0b1c287d476050f12">BOOLEAN</a> <a class="code" href="classPngDecoder.html#a0bc731e14d1ba12aea9e3541859e6b0">InitDecoderLib</a>();
<a name="l00133"></a>00133         <span class="keywordtype">void</span> <a class="code" href="classPngDecoder.html#742039e20dfbe40a142840afda09b025">FreePng</a>();
<a name="l00135"></a>00135         <span class="keywordtype">void</span> <a class="code" href="classPngDecoder.html#a1e854e43696574ca39f1e90ec5caf74">SetErr</a>(<a class="code" href="classPngDecoder.html#0dc1de24c496b9be2a382bf3f9454580">Error</a> code, <a class="code" href="NucInc_8hpp.html#50168fdbaa52d4a0b1c287d476050f12">BOOLEAN</a> cleanup = <a class="code" href="Kernel_2Types_8hpp.html#f5ab51ffc8d377653c77e0c7ba1867f8">TRUE</a>);
<a name="l00136"></a>00136 
<a name="l00138"></a>00138         <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classPngDecoder.html#ca42b4a0e6095d86cf9c508f3f7345d5">PngLibraryReadFunction</a>(png_structp png_struct, 
<a name="l00139"></a>00139             png_bytep <a class="code" href="BP30_2DrawChar__16Bpp_8cpp.html#53d08a8b90f54214294e3ec4d5e30d62">data</a>, png_size_t length);
<a name="l00142"></a>00142         <span class="keyword">static</span> png_voidp <a class="code" href="classPngDecoder.html#c5201934f64063e4f72b0efd2ce82d54">PngLibraryMallocFunction</a>(png_structp png_struct, 
<a name="l00143"></a>00143             png_size_t size);
<a name="l00146"></a>00146         <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classPngDecoder.html#f35d87a1630a99530afa0acaf9a256f2">PngLibraryFreeFunction</a>(png_structp png_struct, 
<a name="l00147"></a>00147             png_voidp ptr);
<a name="l00148"></a>00148 
<a name="l00149"></a>00149     <span class="keyword">protected</span>:
<a name="l00150"></a><a class="code" href="classPngDecoder.html#422970229fa3b6a129b0a14a69db1e5f">00150</a>         <span class="keyword">const</span> <a class="code" href="classBinData.html">BinData</a> *<a class="code" href="classPngDecoder.html#422970229fa3b6a129b0a14a69db1e5f">m_data</a>;
<a name="l00151"></a>00151 
<a name="l00154"></a><a class="code" href="classPngDecoder.html#3627f5e1500547ab19967f31dfd62040">00154</a>         png_structp <a class="code" href="classPngDecoder.html#3627f5e1500547ab19967f31dfd62040">m_png_ptr</a>;
<a name="l00155"></a><a class="code" href="classPngDecoder.html#8b11863266a4248c43bfc9e59dfc8c42">00155</a>         png_infop <a class="code" href="classPngDecoder.html#8b11863266a4248c43bfc9e59dfc8c42">m_info_ptr</a>;
<a name="l00156"></a><a class="code" href="classPngDecoder.html#40a85d0956ba122f1ff0d339cd73820e">00156</a>         png_bytep <a class="code" href="classPngDecoder.html#40a85d0956ba122f1ff0d339cd73820e">m_scanline</a>;
<a name="l00157"></a><a class="code" href="classPngDecoder.html#13912d34afd8adb69e416e86e373a269">00157</a>         png_uint_32 <a class="code" href="classPngDecoder.html#13912d34afd8adb69e416e86e373a269">m_width</a>;
<a name="l00158"></a><a class="code" href="classPngDecoder.html#73bc402012e2f8e56c41c9fa085d1d29">00158</a>         png_uint_32 <a class="code" href="classPngDecoder.html#73bc402012e2f8e56c41c9fa085d1d29">m_height</a>;
<a name="l00159"></a><a class="code" href="classPngDecoder.html#4b5d061666b7251219767d3ca55a5db4">00159</a>         <span class="keywordtype">int</span> <a class="code" href="classPngDecoder.html#4b5d061666b7251219767d3ca55a5db4">m_bit_depth</a>;
<a name="l00160"></a><a class="code" href="classPngDecoder.html#7972b698fe7c5a1a13b089f6fc6226b3">00160</a>         <span class="keywordtype">int</span> <a class="code" href="classPngDecoder.html#7972b698fe7c5a1a13b089f6fc6226b3">m_color_type</a>;
<a name="l00161"></a><a class="code" href="classPngDecoder.html#0748d61b8961ea2361619a77d31d9b4d">00161</a>         <span class="keywordtype">int</span> <a class="code" href="classPngDecoder.html#0748d61b8961ea2361619a77d31d9b4d">m_interlace_type</a>;
<a name="l00162"></a>00162 
<a name="l00164"></a><a class="code" href="classPngDecoder.html#122d179694497e2659a1d315b612bd52">00164</a>         <a class="code" href="NucInc_8hpp.html#50168fdbaa52d4a0b1c287d476050f12">BOOLEAN</a> <a class="code" href="classPngDecoder.html#122d179694497e2659a1d315b612bd52">m_is_transparent</a>;
<a name="l00166"></a><a class="code" href="classPngDecoder.html#dde2ff81904b7797f8f4ec8770d884c1">00166</a>         <a class="code" href="classColor.html">Color</a> <a class="code" href="classPngDecoder.html#dde2ff81904b7797f8f4ec8770d884c1">m_transparent_color</a>;
<a name="l00167"></a><a class="code" href="classPngDecoder.html#c0eebd2369643abbc6aac67f00c74adf">00167</a>         <a class="code" href="NucInc_8hpp.html#d8ce12d83f204245685f98caf9d03944">UINT8</a> <a class="code" href="classPngDecoder.html#c0eebd2369643abbc6aac67f00c74adf">m_trns_red</a>;
<a name="l00168"></a><a class="code" href="classPngDecoder.html#09cc3a48899d6a37a6ed432a32f77f23">00168</a>         <a class="code" href="NucInc_8hpp.html#d8ce12d83f204245685f98caf9d03944">UINT8</a> <a class="code" href="classPngDecoder.html#09cc3a48899d6a37a6ed432a32f77f23">m_trns_green</a>;
<a name="l00169"></a><a class="code" href="classPngDecoder.html#0f883974f25a7612ef5cf9b737d53cc9">00169</a>         <a class="code" href="NucInc_8hpp.html#d8ce12d83f204245685f98caf9d03944">UINT8</a> <a class="code" href="classPngDecoder.html#0f883974f25a7612ef5cf9b737d53cc9">m_trns_blue</a>;
<a name="l00170"></a>00170 
<a name="l00172"></a><a class="code" href="classPngDecoder.html#b5eb8eb9cb46137b3ebce3040eb5b4d5">00172</a>         <a class="code" href="NucInc_8hpp.html#50168fdbaa52d4a0b1c287d476050f12">BOOLEAN</a> <a class="code" href="classPngDecoder.html#b5eb8eb9cb46137b3ebce3040eb5b4d5">m_has_native_alpha_channel</a>;
<a name="l00173"></a>00173 
<a name="l00175"></a><a class="code" href="classPngDecoder.html#962b06987a332811861729282a2b2333">00175</a>         <a class="code" href="NucInc_8hpp.html#50168fdbaa52d4a0b1c287d476050f12">BOOLEAN</a> <a class="code" href="classPngDecoder.html#962b06987a332811861729282a2b2333">m_background_specified</a>;
<a name="l00177"></a><a class="code" href="classPngDecoder.html#657b905ce15570b8a2902b73a7a937bf">00177</a>         <a class="code" href="group__GUI.html#gc6a91528dacb774865b210be6168c077">ColorValue</a> <a class="code" href="classPngDecoder.html#657b905ce15570b8a2902b73a7a937bf">m_background_color</a>;
<a name="l00178"></a><a class="code" href="classPngDecoder.html#ac5e93b4957b5279f55c3d3c30cd66ef">00178</a>         <a class="code" href="NucInc_8hpp.html#d8ce12d83f204245685f98caf9d03944">UINT8</a> <a class="code" href="classPngDecoder.html#ac5e93b4957b5279f55c3d3c30cd66ef">m_bkgd_red</a>;
<a name="l00179"></a><a class="code" href="classPngDecoder.html#b5b310821b0f1d50113798bcf26e9110">00179</a>         <a class="code" href="NucInc_8hpp.html#d8ce12d83f204245685f98caf9d03944">UINT8</a> <a class="code" href="classPngDecoder.html#b5b310821b0f1d50113798bcf26e9110">m_bkgd_green</a>;
<a name="l00180"></a><a class="code" href="classPngDecoder.html#51301d3129b7397e36666e7802249418">00180</a>         <a class="code" href="NucInc_8hpp.html#d8ce12d83f204245685f98caf9d03944">UINT8</a> <a class="code" href="classPngDecoder.html#51301d3129b7397e36666e7802249418">m_bkgd_blue</a>;
<a name="l00181"></a>00181 
<a name="l00183"></a><a class="code" href="classPngDecoder.html#ecd34576565d1dee60f045203f0710d8">00183</a>         <a class="code" href="NucInc_8hpp.html#69afa2e50b905f4eab1f2df8a3fd9f23">UINT32</a> <a class="code" href="classPngDecoder.html#ecd34576565d1dee60f045203f0710d8">m_data_idx</a>;
<a name="l00185"></a><a class="code" href="classPngDecoder.html#1e8f6d9ae45dfebaae39194af1b15d8a">00185</a>         <a class="code" href="NucInc_8hpp.html#feeffe52c8fd59db7c61cf8b02042dbf">INT</a> <a class="code" href="classPngDecoder.html#1e8f6d9ae45dfebaae39194af1b15d8a">m_scanline_idx</a>;
<a name="l00186"></a>00186 
<a name="l00188"></a><a class="code" href="classPngDecoder.html#9e18b2772b679fa03701fd27cafde37c">00188</a>         <a class="code" href="classPngDecoder.html#0dc1de24c496b9be2a382bf3f9454580">Error</a> <a class="code" href="classPngDecoder.html#9e18b2772b679fa03701fd27cafde37c">m_last_error</a>;
<a name="l00189"></a>00189 
<a name="l00191"></a><a class="code" href="classPngDecoder.html#566cb9b714fac913f268c43bd3370ce7">00191</a>         <span class="keyword">static</span> <a class="code" href="classPngDecoder.html">PngDecoder</a> *<a class="code" href="classPngDecoder.html#566cb9b714fac913f268c43bd3370ce7">c_decoder</a>;
<a name="l00193"></a><a class="code" href="classPngDecoder.html#18b4028abd6a8a222ec1a113233d616a">00193</a>         <span class="keyword">static</span> <a class="code" href="NucInc_8hpp.html#50168fdbaa52d4a0b1c287d476050f12">BOOLEAN</a> <a class="code" href="classPngDecoder.html#18b4028abd6a8a222ec1a113233d616a">c_sem_created</a>;
<a name="l00194"></a><a class="code" href="classPngDecoder.html#411b4825706d1fe57f04d360cf83b73c">00194</a>         <span class="keyword">static</span> <a class="code" href="classSemaphore.html">Semaphore</a> <a class="code" href="classPngDecoder.html#411b4825706d1fe57f04d360cf83b73c">c_sem</a>;
<a name="l00195"></a>00195 
<a name="l00197"></a><a class="code" href="classPngDecoder.html#1051751d004eab924d48a7927c272a0b">00197</a>         <span class="keyword">static</span> png_voidp <a class="code" href="classPngDecoder.html#1051751d004eab924d48a7927c272a0b">m_huge_mem</a>;
<a name="l00198"></a>00198 
<a name="l00199"></a>00199         <span class="comment">// The number of channels each pixel has, i.e. 4 (RGBA).</span>
<a name="l00200"></a><a class="code" href="classPngDecoder.html#9a00ebef6f48298e847c6348af1ad1d0">00200</a>         <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="NucInc_8hpp.html#feeffe52c8fd59db7c61cf8b02042dbf">INT</a> <a class="code" href="classPngDecoder.html#9a00ebef6f48298e847c6348af1ad1d0">c_pixel_channels</a>;
<a name="l00201"></a>00201 };
<a name="l00202"></a>00202 
<a name="l00204"></a>00204 <span class="preprocessor">#endif  // Apoxi_PngDecoder_hpp</span>
<a name="l00205"></a>00205 <span class="preprocessor"></span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue Jan 24 14:45:07 2006 for APOXI by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6-NO </small></address>
</body>
</html>
