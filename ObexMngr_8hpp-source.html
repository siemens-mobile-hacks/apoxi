<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>APOXI: Obex/ObexMngr.hpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.6-NO -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<h1>Obex/ObexMngr.hpp</h1><a href="ObexMngr_8hpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*  ------------------------------------------------------------------------</span>
<a name="l00002"></a>00002 <span class="comment">    Copyright (C) COMNEON electronic technology GmbH &amp; Co. OHG.</span>
<a name="l00003"></a>00003 <span class="comment">    All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment">    ------------------------------------------------------------------------</span>
<a name="l00005"></a>00005 <span class="comment">    This document contains proprietary information belonging to COMNEON.</span>
<a name="l00006"></a>00006 <span class="comment">    Passing on and copying of this document, use and communication of its</span>
<a name="l00007"></a>00007 <span class="comment">    contents is not permitted without prior written authorisation.</span>
<a name="l00008"></a>00008 <span class="comment">    ------------------------------------------------------------------------ */</span>
<a name="l00009"></a>00009 <span class="preprocessor">#if !defined(Apoxi_ObexMngr_hpp)</span>
<a name="l00010"></a><a class="code" href="ObexMngr_8hpp.html#81a3b1893cccf2783cb5da30d45bd378">00010</a> <span class="preprocessor"></span><span class="preprocessor">#define Apoxi_ObexMngr_hpp</span>
<a name="l00011"></a>00011 <span class="preprocessor"></span>
<a name="l00195"></a>00195 
<a name="l00196"></a>00196 
<a name="l00197"></a>00197 <span class="preprocessor">#include &lt;<a class="code" href="ObexResult_8hpp.html">Obex/ObexResult.hpp</a>&gt;</span>
<a name="l00198"></a>00198 <span class="preprocessor">#include &lt;<a class="code" href="ObexOperationId_8hpp.html">Obex/ObexOperationId.hpp</a>&gt;</span>
<a name="l00199"></a>00199 <span class="preprocessor">#include &lt;<a class="code" href="ObexTransportSet_8hpp.html">Obex/ObexTransportSet.hpp</a>&gt;</span>
<a name="l00200"></a>00200 
<a name="l00201"></a>00201 <span class="comment">// Forward declaration of of classes.</span>
<a name="l00202"></a>00202 <span class="keyword">class </span><a class="code" href="classObexChannel.html">ObexChannel</a>;
<a name="l00203"></a>00203 <span class="keyword">class </span><a class="code" href="classObexProtocol.html">ObexProtocol</a>;
<a name="l00204"></a>00204 <span class="keyword">class </span><a class="code" href="classObexServerMngr.html">ObexServerMngr</a>;
<a name="l00205"></a>00205 
<a name="l00244"></a><a class="code" href="classObexMngr.html">00244</a> <span class="keyword">class </span><a class="code" href="classObexMngr.html">ObexMngr</a> {
<a name="l00245"></a>00245 
<a name="l00246"></a><a class="code" href="classObexMngr.html#39686f7ce34dbbe5d757125d7065bf23">00246</a>     <span class="keyword">class   </span><a class="code" href="classObexMngr.html#c84a2c625e78efc91c1f53c685fb6a65">TransportManager</a>;
<a name="l00247"></a>00247 
<a name="l00249"></a>00249     <span class="keyword">friend</span>  <span class="keyword">class </span><a class="code" href="classObexAbstractTransport.html">ObexAbstractTransport</a>;
<a name="l00250"></a><a class="code" href="classObexMngr.html#c84a2c625e78efc91c1f53c685fb6a65">00250</a>     <span class="keyword">friend</span>  <span class="keyword">class </span><a class="code" href="classObexMngr.html#c84a2c625e78efc91c1f53c685fb6a65">TransportManager</a>;
<a name="l00251"></a><a class="code" href="classObexMngr.html#0e0170dbbe644de05ea7b5f2d936c32c">00251</a>     <span class="keyword">friend</span>  <span class="keyword">class </span><a class="code" href="classObexServerInfo.html">ObexServerInfo</a>;
<a name="l00252"></a><a class="code" href="classObexMngr.html#e8d94f981057a932be00b9686694b8d9">00252</a>     <span class="keyword">friend</span>  <span class="keyword">class </span><a class="code" href="classObexServer.html">ObexServer</a>;
<a name="l00253"></a><a class="code" href="classObexMngr.html#81487f2804e60488cd8d66dcf3fba509">00253</a>     <span class="keyword">friend</span>  <span class="keyword">class </span><a class="code" href="classObexOppServer.html">ObexOppServer</a>;
<a name="l00254"></a><a class="code" href="classObexMngr.html#6306c62d16f74bf3833807df8edb7715">00254</a>     <span class="keyword">friend</span>  <span class="keyword">class </span><a class="code" href="classObexLayer.html">ObexLayer</a>;
<a name="l00255"></a><a class="code" href="classObexMngr.html#6797064761bc439b9b158c6a787b6bcd">00255</a>     <span class="keyword">friend</span>  <span class="keyword">class </span><a class="code" href="classObexMngr.html#6797064761bc439b9b158c6a787b6bcd">ObexOppServerTest</a>;
<a name="l00256"></a>00256 
<a name="l00257"></a>00257     <span class="keyword">public</span>:
<a name="l00258"></a><a class="code" href="classObexMngr.html#c7f3ad1fa9e02ce4c22e6f2fa589bb2e">00258</a>         <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="NucInc_8hpp.html#35cd67ba7bb0db8105eb6267467535d7">CHAR</a> *     <a class="code" href="classObexMngr.html#c7f3ad1fa9e02ce4c22e6f2fa589bb2e">c_any_url</a>;
<a name="l00259"></a>00259 
<a name="l00261"></a>00261         <span class="keyword">static</span> <a class="code" href="classObexMngr.html">ObexMngr</a> &amp;   <a class="code" href="classObexMngr.html#e9147ab8ef0dc20c715a83760be9e3ab">GetInstance</a>();
<a name="l00262"></a>00262 
<a name="l00278"></a>00278         <a class="code" href="classObexOperationId.html">ObexOperationId</a>         <a class="code" href="classObexMngr.html#7250f399439c977358709b2518b47008">StartSelection</a>(<a class="code" href="classObexTransportSet.html">ObexTransportSet</a> sel_from);
<a name="l00279"></a>00279 
<a name="l00286"></a>00286         <span class="keywordtype">void</span>                    <a class="code" href="classObexMngr.html#1be20a43fb49624d2b4b655da10fd6f0">AbortSelection</a>(<a class="code" href="classObexOperationId.html">ObexOperationId</a>  oper_id);
<a name="l00287"></a>00287 
<a name="l00297"></a>00297         <a class="code" href="classObexAbstractTransport.html">ObexAbstractTransport</a> &amp; <a class="code" href="classObexMngr.html#59f17748a529466bf76b8a22015be9f5">GetTransport</a>(<span class="keyword">const</span> <a class="code" href="classObexChannel.html">ObexChannel</a> &amp;  channel) <span class="keyword">const</span>;
<a name="l00298"></a>00298 
<a name="l00308"></a>00308         <a class="code" href="classObexAbstractTransport.html">ObexAbstractTransport</a> &amp; <a class="code" href="classObexMngr.html#59f17748a529466bf76b8a22015be9f5">GetTransport</a>(<a class="code" href="group__OBEX.html#g600b47b47493a092cb9f108f25077d5e">ObexTransportId</a>    transport_id) <span class="keyword">const</span>;
<a name="l00309"></a>00309 
<a name="l00320"></a>00320         <a class="code" href="classObexProtocol.html">ObexProtocol</a> &amp;          <a class="code" href="classObexMngr.html#1397a959d3041cc6b1726fdb172e9354">GetProtocol</a>(<span class="keyword">const</span> <a class="code" href="classObexChannel.html">ObexChannel</a> &amp;  channel) <span class="keyword">const</span>;
<a name="l00321"></a>00321 
<a name="l00329"></a>00329         <span class="keywordtype">void</span>                        <a class="code" href="classObexMngr.html#476407d94a0599417f748c36527254bf">RegisterObexApp</a>(<a class="code" href="classApplication.html">Application</a> &amp;   obex_app);
<a name="l00330"></a>00330 
<a name="l00334"></a>00334         <span class="keyword">inline</span>  <a class="code" href="classObexTransportSet.html">ObexTransportSet</a>    <a class="code" href="group__OBEX.html#g2173f7427f65350192382c84ad3b26a1">EnumTransports</a>(<span class="keyword">const</span> <a class="code" href="classString.html">String</a> &amp;   filter_url = <a class="code" href="classObexMngr.html#c7f3ad1fa9e02ce4c22e6f2fa589bb2e">c_any_url</a>) <span class="keyword">const</span>;
<a name="l00335"></a>00335 
<a name="l00348"></a>00348         <a class="code" href="classObexResult.html">ObexResult</a>              <a class="code" href="classObexMngr.html#dc58a406b7cd13390d944b0eafa6ea16">SelectTransport</a>(<a class="code" href="classObexAbstractTransport.html">ObexAbstractTransport</a> *  selected);
<a name="l00349"></a>00349 
<a name="l00350"></a>00350     <span class="keyword">private</span>:
<a name="l00351"></a>00351         <span class="keyword">class </span>TransportVisitor;
<a name="l00352"></a>00352         <span class="keyword">class </span>TransportFilter;
<a name="l00353"></a>00353         <span class="keyword">class </span>TransportFinder;
<a name="l00354"></a>00354         <span class="keyword">class </span>TransportLister;
<a name="l00355"></a>00355 
<a name="l00360"></a>00360         <span class="keyword">class </span>TransportMngr {
<a name="l00361"></a>00361 
<a name="l00362"></a>00362             <span class="keyword">public</span>:
<a name="l00364"></a>00364                 TransportMngr();
<a name="l00365"></a>00365 
<a name="l00367"></a>00367                 <span class="keywordtype">void</span>                        Init();
<a name="l00368"></a>00368 
<a name="l00374"></a>00374                 <a class="code" href="group__OBEX.html#g600b47b47493a092cb9f108f25077d5e">ObexTransportId</a>             Register(<a class="code" href="classObexAbstractTransport.html">ObexAbstractTransport</a> &amp;  t);
<a name="l00375"></a>00375 
<a name="l00380"></a>00380                 <a class="code" href="classObexAbstractTransport.html">ObexAbstractTransport</a> *     Get(<a class="code" href="group__OBEX.html#g600b47b47493a092cb9f108f25077d5e">ObexTransportId</a>  <span class="keywordtype">id</span>) <span class="keyword">const</span>;
<a name="l00381"></a>00381 
<a name="l00386"></a>00386                 <a class="code" href="classObexAbstractTransport.html">ObexAbstractTransport</a> *     Get(<span class="keyword">const</span> <a class="code" href="classString.html">String</a> &amp;  scheme_url) <span class="keyword">const</span>;
<a name="l00387"></a>00387 
<a name="l00391"></a>00391                 <a class="code" href="classObexTransportSet.html">ObexTransportSet</a>            Enum(<span class="keyword">const</span> <a class="code" href="classString.html">String</a> &amp;  filter_url) <span class="keyword">const</span>;
<a name="l00392"></a>00392 
<a name="l00393"></a>00393             <span class="keyword">private</span>:
<a name="l00394"></a>00394                 <a class="code" href="classObexAbstractTransport.html">ObexAbstractTransport</a> *     m_xport_arr[<a class="code" href="group__Currently__Undocumented__Defines.html#gdad3e8cb0ec317056162aa2cd8677658">APOXI_OBEX_MAX_NO_TRANSPORTS</a>];
<a name="l00395"></a>00395                 <a class="code" href="group__OBEX.html#g600b47b47493a092cb9f108f25077d5e">ObexTransportId</a>             m_first_id_available;
<a name="l00396"></a>00396 
<a name="l00398"></a>00398                 TransportMngr(<span class="keyword">const</span> TransportMngr &amp;);
<a name="l00399"></a>00399 
<a name="l00401"></a>00401                 TransportMngr &amp;     operator=(<span class="keyword">const</span> TransportMngr &amp;);
<a name="l00402"></a>00402 
<a name="l00403"></a>00403                 <span class="keywordtype">void</span>                ForEach(TransportVisitor &amp;  v)  <span class="keyword">const</span>;
<a name="l00404"></a>00404         };
<a name="l00405"></a>00405 
<a name="l00410"></a>00410         <span class="keyword">class </span>TransportVisitor : <span class="keyword">public</span> <a class="code" href="classNonCloneable.html">NonCloneable</a> {
<a name="l00411"></a>00411 
<a name="l00412"></a>00412             <span class="keyword">friend</span> <span class="keyword">class  </span>TransportMngr;
<a name="l00413"></a>00413 
<a name="l00414"></a>00414             <span class="keyword">protected</span>:
<a name="l00416"></a>00416                 TransportVisitor();
<a name="l00417"></a>00417 
<a name="l00418"></a>00418             <span class="keyword">private</span>:
<a name="l00419"></a>00419                 <span class="comment">/*  @brief  Method called for each node being visited.</span>
<a name="l00420"></a>00420 <span class="comment"></span>
<a name="l00421"></a>00421 <span class="comment">                    @param  t   Reference to transport currently visited.</span>
<a name="l00422"></a>00422 <span class="comment">                    @return \c 'TRUE' to stop visiting additional nodes,</span>
<a name="l00423"></a>00423 <span class="comment">                            \c 'FALSE' tp continue. */</span>
<a name="l00424"></a>00424                 <span class="keyword">virtual</span> <a class="code" href="NucInc_8hpp.html#50168fdbaa52d4a0b1c287d476050f12">BOOLEAN</a>     Visit(<a class="code" href="classObexAbstractTransport.html">ObexAbstractTransport</a> &amp;  t) = 0;
<a name="l00425"></a>00425         };
<a name="l00426"></a>00426 
<a name="l00428"></a>00428         <span class="keyword">class </span>SelectCommand {
<a name="l00429"></a>00429             <span class="keyword">public</span>:
<a name="l00431"></a>00431                 SelectCommand() {}
<a name="l00432"></a>00432 
<a name="l00434"></a>00434                 SelectCommand(<a class="code" href="classObexTransportSet.html">ObexTransportSet</a>  ts,
<a name="l00435"></a>00435                               <a class="code" href="classObexOperationId.html">ObexOperationId</a>   <span class="keywordtype">id</span>) :
<a name="l00436"></a>00436                     m_from_ts(ts),
<a name="l00437"></a>00437                     m_oper_id(id)
<a name="l00438"></a>00438                 {
<a name="l00439"></a>00439                 }
<a name="l00441"></a>00441                 <span class="keyword">inline</span>  <span class="keyword">const</span> <a class="code" href="classObexOperationId.html">ObexOperationId</a> &amp;     GetOperationId() <span class="keyword">const</span>;
<a name="l00442"></a>00442 
<a name="l00444"></a>00444                 <span class="keyword">inline</span>  <a class="code" href="NucInc_8hpp.html#50168fdbaa52d4a0b1c287d476050f12">BOOLEAN</a>                     IsPending() <span class="keyword">const</span>;
<a name="l00445"></a>00445 
<a name="l00447"></a>00447                 <span class="keywordtype">void</span>    Execute(<a class="code" href="classApplication.html">Application</a> *       obex_app_ptr);
<a name="l00448"></a>00448 
<a name="l00450"></a>00450                 <span class="keywordtype">void</span>    Complete(<a class="code" href="group__OBEX.html#g600b47b47493a092cb9f108f25077d5e">ObexTransportId</a>    transport_id);
<a name="l00451"></a>00451 
<a name="l00452"></a>00452             <span class="keyword">private</span>:
<a name="l00453"></a>00453                 <a class="code" href="classObexTransportSet.html">ObexTransportSet</a>    m_from_ts;
<a name="l00454"></a>00454                 <a class="code" href="classObexOperationId.html">ObexOperationId</a>     m_oper_id;
<a name="l00455"></a>00455         };
<a name="l00456"></a>00456 
<a name="l00457"></a>00457         <span class="keyword">static</span> <a class="code" href="classObexMngr.html">ObexMngr</a>     s_obex_mngr;
<a name="l00458"></a>00458 
<a name="l00459"></a>00459         TransportMngr       m_xport_mngr;
<a name="l00460"></a>00460         SelectCommand       m_select_queue[<a class="code" href="group__Currently__Undocumented__Defines.html#g4bba8c9d33cc963b2471f81d7e98cdfb">APOXI_OBEX_MAX_NO_SELECTIONS</a>];
<a name="l00461"></a>00461         <a class="code" href="classApplication.html">Application</a> *       m_obex_app_ptr;
<a name="l00462"></a>00462         <a class="code" href="NucInc_8hpp.html#d8ce12d83f204245685f98caf9d03944">UINT8</a>               m_head_queue_indx;
<a name="l00463"></a>00463         <a class="code" href="NucInc_8hpp.html#d8ce12d83f204245685f98caf9d03944">UINT8</a>               m_tail_queue_indx;
<a name="l00464"></a>00464         <a class="code" href="NucInc_8hpp.html#50168fdbaa52d4a0b1c287d476050f12">BOOLEAN</a>             m_select_abort;
<a name="l00465"></a>00465 
<a name="l00467"></a>00467         <a class="code" href="classObexMngr.html">ObexMngr</a>(<span class="keyword">const</span> <a class="code" href="classObexMngr.html">ObexMngr</a> &amp;);
<a name="l00468"></a>00468 
<a name="l00470"></a>00470         <a class="code" href="classObexMngr.html">ObexMngr</a> &amp;          operator=(<span class="keyword">const</span> <a class="code" href="classObexMngr.html">ObexMngr</a> &amp;);
<a name="l00471"></a>00471 
<a name="l00473"></a>00473         <a class="code" href="classObexMngr.html">ObexMngr</a>();
<a name="l00474"></a>00474 
<a name="l00476"></a>00476         <span class="keywordtype">void</span>                Init();
<a name="l00477"></a>00477 
<a name="l00482"></a>00482         <span class="keyword">inline</span>  <a class="code" href="group__OBEX.html#g600b47b47493a092cb9f108f25077d5e">ObexTransportId</a>     RegisterTransport(<a class="code" href="classObexAbstractTransport.html">ObexAbstractTransport</a> &amp;  t);
<a name="l00483"></a>00483 
<a name="l00484"></a>00484         <a class="code" href="classObexServerMngr.html">ObexServerMngr</a> &amp;            GetServerMngr();
<a name="l00485"></a>00485 };
<a name="l00486"></a>00486 
<a name="l00487"></a>00487 <span class="comment">/*  ----------------------------------------------------------------------</span>
<a name="l00488"></a>00488 <span class="comment">    SelectCommand::GetOperationId</span>
<a name="l00489"></a>00489 <span class="comment">    ---------------------------------------------------------------------- */</span>
<a name="l00490"></a><a class="code" href="group__OBEX.html#ga96d60b562601c3374248ec4b64d4539">00490</a> <span class="keyword">const</span> <a class="code" href="classObexOperationId.html">ObexOperationId</a> &amp;     ObexMngr::SelectCommand::GetOperationId()<span class="keyword"></span>
<a name="l00491"></a>00491 <span class="keyword">const</span>
<a name="l00492"></a>00492 <span class="keyword"></span>{
<a name="l00493"></a>00493     <span class="keywordflow">return</span>  m_oper_id;
<a name="l00494"></a>00494 }<span class="comment">// GetOperationId</span>
<a name="l00495"></a>00495 
<a name="l00496"></a>00496 <span class="comment">/*  ----------------------------------------------------------------------</span>
<a name="l00497"></a>00497 <span class="comment">    SelectCommand::IsPending</span>
<a name="l00498"></a>00498 <span class="comment">    ---------------------------------------------------------------------- */</span>
<a name="l00499"></a><a class="code" href="group__OBEX.html#g243e014b63cd630ffb956c08e684d26a">00499</a> <a class="code" href="NucInc_8hpp.html#50168fdbaa52d4a0b1c287d476050f12">BOOLEAN</a>     ObexMngr::SelectCommand::IsPending()<span class="keyword"></span>
<a name="l00500"></a>00500 <span class="keyword">const</span>
<a name="l00501"></a>00501 <span class="keyword"></span>{
<a name="l00502"></a>00502     <span class="keywordflow">return</span>  m_oper_id.IsValid();
<a name="l00503"></a>00503 }<span class="comment">// IsPending</span>
<a name="l00504"></a>00504 
<a name="l00505"></a>00505 <span class="comment">/*  ----------------------------------------------------------------------</span>
<a name="l00506"></a>00506 <span class="comment">    EnumTransports</span>
<a name="l00507"></a>00507 <span class="comment">    ---------------------------------------------------------------------- */</span>
<a name="l00508"></a><a class="code" href="group__OBEX.html#g2173f7427f65350192382c84ad3b26a1">00508</a> <a class="code" href="classObexTransportSet.html">ObexTransportSet</a>    <a class="code" href="group__OBEX.html#g2173f7427f65350192382c84ad3b26a1">ObexMngr::EnumTransports</a>(<span class="keyword">const</span> <a class="code" href="classString.html">String</a> &amp;     filter_url)<span class="keyword"></span>
<a name="l00509"></a>00509 <span class="keyword">const</span>
<a name="l00510"></a>00510 <span class="keyword"></span>{
<a name="l00511"></a>00511     <span class="keywordflow">return</span>  m_xport_mngr.Enum(filter_url);
<a name="l00512"></a>00512 }<span class="comment">// EnumTransports</span>
<a name="l00513"></a>00513 
<a name="l00514"></a>00514 <span class="comment">/*  ----------------------------------------------------------------------</span>
<a name="l00515"></a>00515 <span class="comment">    RegisterTransport</span>
<a name="l00516"></a>00516 <span class="comment">    ---------------------------------------------------------------------- */</span>
<a name="l00517"></a>00517 <a class="code" href="group__OBEX.html#g600b47b47493a092cb9f108f25077d5e">ObexTransportId</a>     ObexMngr::RegisterTransport(<a class="code" href="classObexAbstractTransport.html">ObexAbstractTransport</a> &amp;  t)
<a name="l00518"></a>00518 {
<a name="l00519"></a>00519     <span class="keywordflow">return</span>  m_xport_mngr.Register(t);
<a name="l00520"></a>00520 }<span class="comment">// RegisterTransport</span>
<a name="l00521"></a>00521 
<a name="l00523"></a>00523 
<a name="l00524"></a>00524 <span class="preprocessor">#endif  // Apoxi_ObexMngr_hpp</span>
<a name="l00525"></a>00525 <span class="preprocessor"></span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue Jan 24 14:50:38 2006 for APOXI by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6-NO </small></address>
</body>
</html>
