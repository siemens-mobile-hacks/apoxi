<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>APOXI: FileDataSource Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.6-NO -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li id="current"><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="classes.html"><span>Alphabetical&nbsp;List</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Data&nbsp;Fields</span></a></li>
  </ul></div>
<h1>FileDataSource Class Reference<br>
<small>
[<a class="el" href="group__RFS.html">Root File System</a>]</small>
</h1><!-- doxytag: class="FileDataSource" --><!-- doxytag: inherits="DataSource" --><code>#include &lt;<a class="el" href="Afs_2Rfs_2FileDataSource_8hpp-source.html">Apoxi/Afs/Rfs/FileDataSource.hpp</a>&gt;</code>
<p>
Inheritance diagram for FileDataSource:<p><center><img src="classFileDataSource__inherit__graph.png" border="0" usemap="#FileDataSource__inherit__map" alt="Inheritance graph"></center>
<map name="FileDataSource__inherit__map">
<area href="classRamDataSource.html" shape="rect" coords="7,156,127,183" alt="">
<area href="classDataSource.html" shape="rect" coords="21,7,112,33" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center>Collaboration diagram for FileDataSource:<p><center><img src="classFileDataSource__coll__graph.png" border="0" usemap="#FileDataSource__coll__map" alt="Collaboration graph"></center>
<map name="FileDataSource__coll__map">
<area href="classDataSource.html" shape="rect" coords="7,97,97,124" alt="">
<area href="classDrmAsset.html" shape="rect" coords="12,7,92,33" alt="">
<area href="classNiSharedPtr.html" shape="rect" coords="121,97,249,124" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual BOOLEAN&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFileDataSource.html#ac1684317c0cc65c81258a52e8f78d18">Close</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFileDataSource.html#2a213a1ee26999266fd48be7feb84760">FileDataSource</a> (const <a class="el" href="classNiSharedPtr.html">FilePtr</a> &amp;file, <a class="el" href="group__Auxiliary.html#g1636ba41b4ff8890cdcad97ed10fb4af">DrmLocalId</a> id=<a class="el" href="group__Auxiliary.html#g20c0538a1314f420e00e79622c59a124">c_drm_invalid_local_id</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFileDataSource.html#faa1a84eec7518d89f2407406951bc2c">FileDataSource</a> (const <a class="el" href="classPath.html">Path</a> &amp;file_path, <a class="el" href="group__Auxiliary.html#g1636ba41b4ff8890cdcad97ed10fb4af">DrmLocalId</a> id=<a class="el" href="group__Auxiliary.html#g20c0538a1314f420e00e79622c59a124">c_drm_invalid_local_id</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual BOOLEAN&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFileDataSource.html#4451ac64aad75ad74611d0121e53b5ac">GetSize</a> (UINT32 &amp;size) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual BOOLEAN&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFileDataSource.html#3bbdcd366c7a868c3411d23e704f403d">IsOpen</a> () const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual BOOLEAN&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFileDataSource.html#121a5a802ccfc8743b3ad2b8053827cb">Open</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual BOOLEAN&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFileDataSource.html#6c21a19ca330e61d8683de5c02c70f55">Read</a> (UINT32 offset, void HUGE *buffer, UINT32 max_count, UINT32 &amp;bytes_read)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual BOOLEAN&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFileDataSource.html#57db78ca4eb29d8c49d9de82410c85e8">Read</a> (UINT32 offset, void HUGE *buffer, UINT32 count)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual BOOLEAN&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFileDataSource.html#f54e14cfc7c42ec0584cdd9ca6fcb892">Read</a> (void HUGE *buffer, UINT32 max_count, UINT32 &amp;bytes_read)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual BOOLEAN&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFileDataSource.html#765cb81095fe39c49137d40b650a183e">Read</a> (void HUGE *buffer, UINT32 count)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFileDataSource.html#3a1bb1b8562c74d45c43bfdfc33de6e9">~FileDataSource</a> ()</td></tr>

<tr><td colspan="2"><br><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classNiSharedPtr.html">FilePtr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFileDataSource.html#8bbd55f52e29319e12db4c6cf95b3459">m_file</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Class <a class="el" href="classFileDataSource.html">FileDataSource</a> implements a data source which reads from an associated <a class="el" href="classFile.html">File</a> instance. 
<p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="faa1a84eec7518d89f2407406951bc2c"></a><!-- doxytag: member="FileDataSource::FileDataSource" ref="faa1a84eec7518d89f2407406951bc2c" args="(const Path &amp;file_path, DrmLocalId id=c_drm_invalid_local_id)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">FileDataSource::FileDataSource           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classPath.html">Path</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>file_path</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="group__Auxiliary.html#g1636ba41b4ff8890cdcad97ed10fb4af">DrmLocalId</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>id</em> = <code><a class="el" href="group__Auxiliary.html#g20c0538a1314f420e00e79622c59a124">c_drm_invalid_local_id</a></code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Creates a file data source instance. This data source reads from the file at <em>file_path</em>. The file data source has to be opened using method <a class="el" href="classFileDataSource.html#121a5a802ccfc8743b3ad2b8053827cb">Open()</a> before reading from it. On destruction, the file data source will be closed if not explicitly done before. Note that the file which shall be read from must be in closed state if it exists, otherwise an assertion holds.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>file_path</em>&nbsp;</td><td>The path of the file to read from. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>id</em>&nbsp;</td><td>The DRM local ID. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="2a213a1ee26999266fd48be7feb84760"></a><!-- doxytag: member="FileDataSource::FileDataSource" ref="2a213a1ee26999266fd48be7feb84760" args="(const FilePtr &amp;file, DrmLocalId id=c_drm_invalid_local_id)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">FileDataSource::FileDataSource           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classNiSharedPtr.html">FilePtr</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>file</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="group__Auxiliary.html#g1636ba41b4ff8890cdcad97ed10fb4af">DrmLocalId</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>id</em> = <code><a class="el" href="group__Auxiliary.html#g20c0538a1314f420e00e79622c59a124">c_drm_invalid_local_id</a></code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Creates a file data source instance. This data source reads from the specified <em>file</em>. The file data source has to be opened using method <a class="el" href="classFileDataSource.html#121a5a802ccfc8743b3ad2b8053827cb">Open()</a> before reading from it. On destruction, the file data source will be closed if not explicitly done before. Note that the file which shall be read from must be in closed state if it exists, otherwise an assertion holds.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>file</em>&nbsp;</td><td>The file to read from. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>id</em>&nbsp;</td><td>The DRM local ID. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="3a1bb1b8562c74d45c43bfdfc33de6e9"></a><!-- doxytag: member="FileDataSource::~FileDataSource" ref="3a1bb1b8562c74d45c43bfdfc33de6e9" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">FileDataSource::~FileDataSource           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Destroys the file data source. The associated file is also closed if not done yet.     </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="ac1684317c0cc65c81258a52e8f78d18"></a><!-- doxytag: member="FileDataSource::Close" ref="ac1684317c0cc65c81258a52e8f78d18" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">BOOLEAN FileDataSource::Close           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Closes the data source. After closing the data source it can not be read any more.<p>
<dl compact><dt><b>Returns:</b></dt><dd>Success of operation. </dd></dl>

<p>
Implements <a class="el" href="classDataSource.html#e7faa90744b52d945935717752b0af54">DataSource</a>.    </td>
  </tr>
</table>
<a class="anchor" name="4451ac64aad75ad74611d0121e53b5ac"></a><!-- doxytag: member="FileDataSource::GetSize" ref="4451ac64aad75ad74611d0121e53b5ac" args="(UINT32 &amp;size) const " --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">BOOLEAN FileDataSource::GetSize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">UINT32 &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>size</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns the size of the data source in terms of bytes.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>The actual size will be written into this variable. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Success of operation. </dd></dl>

<p>
Implements <a class="el" href="classDataSource.html#f87f087b6361f05cf230b647788b28cf">DataSource</a>.    </td>
  </tr>
</table>
<a class="anchor" name="3bbdcd366c7a868c3411d23e704f403d"></a><!-- doxytag: member="FileDataSource::IsOpen" ref="3bbdcd366c7a868c3411d23e704f403d" args="() const " --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">BOOLEAN FileDataSource::IsOpen           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns whether the data source is currently open or closed.<p>
<dl compact><dt><b>Returns:</b></dt><dd>Whether the data source is open or not. </dd></dl>

<p>
Implements <a class="el" href="classDataSource.html#025efc940dd0b0c69d582f4c7d9378b3">DataSource</a>.    </td>
  </tr>
</table>
<a class="anchor" name="121a5a802ccfc8743b3ad2b8053827cb"></a><!-- doxytag: member="FileDataSource::Open" ref="121a5a802ccfc8743b3ad2b8053827cb" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">BOOLEAN FileDataSource::Open           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Opens the file data source. Opening succeeds if the associated file exists, is currently closed, and can be opened in read only mode. 
<p>
Implements <a class="el" href="classDataSource.html#3fccd66aad4d7bbfae66da52fc33d2e4">DataSource</a>.    </td>
  </tr>
</table>
<a class="anchor" name="6c21a19ca330e61d8683de5c02c70f55"></a><!-- doxytag: member="FileDataSource::Read" ref="6c21a19ca330e61d8683de5c02c70f55" args="(UINT32 offset, void HUGE *buffer, UINT32 max_count, UINT32 &amp;bytes_read)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">BOOLEAN FileDataSource::Read           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">UINT32&nbsp;</td>
          <td class="mdname" nowrap> <em>offset</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void HUGE *&nbsp;</td>
          <td class="mdname" nowrap> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>UINT32&nbsp;</td>
          <td class="mdname" nowrap> <em>max_count</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>UINT32 &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>bytes_read</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Reads up to <em>max_count</em> bytes from this data source starting at <em>offset</em> and copies them to the provided <em>buffer</em>. If the read operation was successful then argument <em>bytes_read</em> is set to the actual number of bytes read. This number may differ from <em>max_count</em> due to reaching the end of data while reading. Therefore it is essential to check <em>bytes_read</em> if <code>TRUE</code> is returned! Take care that if you start reading at the end of the data source, i.e. parameter offset is greater than or equal to the size of the data source, this method sets <em>bytes_read</em> to <code>0</code> and returns <code>TRUE</code>, signaling end of data! Note that this method does not affect the current read position. Please see the following sample function for completely reading a data source:<p>
<div class="fragment"><pre class="fragment">            <span class="keyword">static</span> <a class="code" href="NucInc_8hpp.html#50168fdbaa52d4a0b1c287d476050f12">BOOLEAN</a> ReadRandomDataSource(<a class="code" href="classDataSource.html">DataSource</a> &amp;open_ds)
            {
                <a class="code" href="group__Auxiliary.html#gf0f079cffe6a9de996135f9e74020775">ASSERT_DEBUG</a>(open_ds.<a class="code" href="classDataSource.html#025efc940dd0b0c69d582f4c7d9378b3">IsOpen</a>());

                <span class="comment">// Define read buffer.</span>
                <span class="keyword">const</span> <a class="code" href="NucInc_8hpp.html#45c20c14d3d8790a22153d08ab2eb2ff">UINT</a> buf_size = 128;
                <a class="code" href="NucInc_8hpp.html#35cd67ba7bb0db8105eb6267467535d7">CHAR</a> buf[buf_size];

                <span class="comment">// Define variables used for reading.</span>
                <a class="code" href="NucInc_8hpp.html#69afa2e50b905f4eab1f2df8a3fd9f23">UINT32</a> offset = 0;
                <a class="code" href="NucInc_8hpp.html#69afa2e50b905f4eab1f2df8a3fd9f23">UINT32</a> bytes_read;
                <a class="code" href="NucInc_8hpp.html#50168fdbaa52d4a0b1c287d476050f12">BOOLEAN</a> ok;

                <span class="comment">// Read whole data source in a loop.</span>
                <span class="keywordflow">while</span> ((ok = open_ds.<a class="code" href="classDataSource.html#f3ba71a02bd6320cad22f74994e11475">Read</a>(offset, buf, buf_size, bytes_read)) &amp;&amp;
                    bytes_read != 0)
                {
                    <span class="comment">// Use buf which is filled with valid data from index 0 to index</span>
                    <span class="comment">// (bytes_read - 1).</span>
                    <span class="comment">// ...</span>

                    <span class="comment">// Increase offset where to read next.</span>
                    offset += bytes_read;
                }

                <span class="comment">// ok is FALSE if a read error occurred, otherwise TRUE.</span>
                <span class="keywordflow">return</span> ok;
            }
</pre></div><p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>offset</em>&nbsp;</td><td>The zero-based position where to start reading the data source. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buffer</em>&nbsp;</td><td>The pointer to the buffer where the bytes read have to be copied to. It must be a valid pointer and the buffer must be at least <em>max_count</em> bytes in size. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>max_count</em>&nbsp;</td><td>The number of bytes to read. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bytes_read</em>&nbsp;</td><td>Bytes actually read.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Success of operation. </dd></dl>

<p>
Implements <a class="el" href="classDataSource.html#eefeeb5227d00c9184d046e7fb26b154">DataSource</a>.    </td>
  </tr>
</table>
<a class="anchor" name="57db78ca4eb29d8c49d9de82410c85e8"></a><!-- doxytag: member="FileDataSource::Read" ref="57db78ca4eb29d8c49d9de82410c85e8" args="(UINT32 offset, void HUGE *buffer, UINT32 count)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">BOOLEAN FileDataSource::Read           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">UINT32&nbsp;</td>
          <td class="mdname" nowrap> <em>offset</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void HUGE *&nbsp;</td>
          <td class="mdname" nowrap> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>UINT32&nbsp;</td>
          <td class="mdname" nowrap> <em>count</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Reads exactly <em>count</em> bytes from this data source starting at <em>offset</em> and copies them to the provided <em>buffer</em>. Note that this method does not affect the current read position.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>offset</em>&nbsp;</td><td>The zero-based position where to start reading the data source. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buffer</em>&nbsp;</td><td>The pointer to the buffer where the bytes read have to be copied to. It must be a valid pointer and the buffer must be at least <em>count</em> bytes in size. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>count</em>&nbsp;</td><td>The number of bytes to read.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Success of operation. </dd></dl>

<p>
Implements <a class="el" href="classDataSource.html#338a085ba9eab9e6a3e6e9c7001b5ea8">DataSource</a>.    </td>
  </tr>
</table>
<a class="anchor" name="f54e14cfc7c42ec0584cdd9ca6fcb892"></a><!-- doxytag: member="FileDataSource::Read" ref="f54e14cfc7c42ec0584cdd9ca6fcb892" args="(void HUGE *buffer, UINT32 max_count, UINT32 &amp;bytes_read)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">BOOLEAN FileDataSource::Read           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void HUGE *&nbsp;</td>
          <td class="mdname" nowrap> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>UINT32&nbsp;</td>
          <td class="mdname" nowrap> <em>max_count</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>UINT32 &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>bytes_read</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Reads up to <em>max_count</em> bytes from this data source starting at the current read position and copies them to the provided buffer. If the read operation was successful then argument <em>bytes_read</em> is set to the actual number of bytes read. This number may differ from <em>max_count</em> due to reaching the end of data while reading. Therefore it is essential to check <em>bytes_read</em> if <code>TRUE</code> is returned! Take care that if you start reading at the end of the data source, i.e. the current read position is greater than or equal to the size of the data source, this method sets <em>bytes_read</em> to <code>0</code> and returns <code>TRUE</code>, signaling end of data! The current read position is updated. Please see the following sample function for completely reading a data source:<p>
<div class="fragment"><pre class="fragment">            <span class="keyword">static</span> <a class="code" href="NucInc_8hpp.html#50168fdbaa52d4a0b1c287d476050f12">BOOLEAN</a> ReadSequentialDataSource(<a class="code" href="classDataSource.html">DataSource</a> &amp;open_ds)
            {
                <a class="code" href="group__Auxiliary.html#gf0f079cffe6a9de996135f9e74020775">ASSERT_DEBUG</a>(open_ds.<a class="code" href="classDataSource.html#025efc940dd0b0c69d582f4c7d9378b3">IsOpen</a>());

                <span class="comment">// Define read buffer.</span>
                <span class="keyword">const</span> <a class="code" href="NucInc_8hpp.html#45c20c14d3d8790a22153d08ab2eb2ff">UINT</a> buf_size = 128;
                <a class="code" href="NucInc_8hpp.html#35cd67ba7bb0db8105eb6267467535d7">CHAR</a> buf[buf_size];

                <span class="comment">// Define variables used for reading.</span>
                <a class="code" href="NucInc_8hpp.html#69afa2e50b905f4eab1f2df8a3fd9f23">UINT32</a> bytes_read;
                <a class="code" href="NucInc_8hpp.html#50168fdbaa52d4a0b1c287d476050f12">BOOLEAN</a> ok;

                <span class="comment">// Read whole data source in a loop.</span>
                <span class="keywordflow">while</span> ((ok = open_ds.<a class="code" href="classDataSource.html#f3ba71a02bd6320cad22f74994e11475">Read</a>(buf, buf_size, bytes_read)) &amp;&amp;
                    bytes_read != 0)
                {
                    <span class="comment">// Use buf which is filled with valid data from index 0 to index</span>
                    <span class="comment">// (bytes_read - 1).</span>
                    <span class="comment">// ...</span>
                }

                <span class="comment">// ok is FALSE if a read error occurred, otherwise TRUE.</span>
                <span class="keywordflow">return</span> ok;
            }
</pre></div><p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>buffer</em>&nbsp;</td><td>The pointer to the buffer where the bytes read have to be copied to. It must be a valid pointer and the buffer must be at least <em>max_count</em> bytes in size. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>max_count</em>&nbsp;</td><td>The number of bytes to read. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bytes_read</em>&nbsp;</td><td>Bytes actually read.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Success of operation. </dd></dl>

<p>
Implements <a class="el" href="classDataSource.html#5fd4fca9d7086f5de97aab737f2dd080">DataSource</a>.    </td>
  </tr>
</table>
<a class="anchor" name="765cb81095fe39c49137d40b650a183e"></a><!-- doxytag: member="FileDataSource::Read" ref="765cb81095fe39c49137d40b650a183e" args="(void HUGE *buffer, UINT32 count)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">BOOLEAN FileDataSource::Read           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void HUGE *&nbsp;</td>
          <td class="mdname" nowrap> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>UINT32&nbsp;</td>
          <td class="mdname" nowrap> <em>count</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Reads exactly <em>count</em> bytes from this data source starting at the current read position and copies them to the provided <em>buffer</em>. The current read position is updated.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>buffer</em>&nbsp;</td><td>The pointer to the buffer where the bytes read have to be copied to. It must be a valid pointer and the buffer must be at least <em>count</em> bytes in size. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>count</em>&nbsp;</td><td>The number of bytes to read.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Success of operation. </dd></dl>

<p>
Implements <a class="el" href="classDataSource.html#f3ba71a02bd6320cad22f74994e11475">DataSource</a>.    </td>
  </tr>
</table>
<hr><h2>Field Documentation</h2>
<a class="anchor" name="8bbd55f52e29319e12db4c6cf95b3459"></a><!-- doxytag: member="FileDataSource::m_file" ref="8bbd55f52e29319e12db4c6cf95b3459" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classNiSharedPtr.html">FilePtr</a> <a class="el" href="classFileDataSource.html#8bbd55f52e29319e12db4c6cf95b3459">FileDataSource::m_file</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li>Afs/Rfs/<a class="el" href="Afs_2Rfs_2FileDataSource_8hpp-source.html">FileDataSource.hpp</a><li>Afs/Rfs/<a class="el" href="FileDataSource_8cpp.html">FileDataSource.cpp</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Wed Jan 25 01:15:25 2006 for APOXI by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6-NO </small></address>
</body>
</html>
